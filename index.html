<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GEAR AI - الذكاء الاصطناعي المتطور</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- الكلمات المفتاحية المخصصة لـ GEAR AI -->
    <meta name="keywords" content="GEAR AI, ذكاء اصطناعي, الذكاء الاصطناعي, AI, Artificial Intelligence, روبوت محادثة, chatbot, تعلم آلة, machine learning, معالجة اللغة الطبيعية, NLP, حلول ذكية, أتمتة, innovation, innovation, future technology, GPT, مساعد ذكي">

    <!-- وصف الموقع -->
    <meta name="description" content="GEAR AI - مساعدك الذكي المتقدم. استفد من أحدث تقنيات الذكاء الاصطناعي للمحادثة، توليد النصوص، حل المشكلات، والإبداع. جرب قوة المستقبل اليوم.">

    <!-- Open Graph Tags للشكل الاحترافي على وسائل التواصل -->
    <meta property="og:title" content="GEAR AI | مساعدك الذكي المتقدم للذكاء الاصطناعي">
    <meta property="og:description" content="تجربة الثورة الصناعية الرابعة مع GEAR AI. محادثات ذكية، توليد نصوص مبدعة، وحلول ذكية لجميع استفساراتك.">
    <meta property="og:image" content="websima.png">
    <meta property="og:url" content="https://m0s6a5e.github.io/GEAR-AI/">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="GEAR AI">

    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="GEAR AI | مساعدك الذكي المتقدم للذكاء الاصطناعي">
    <meta name="twitter:description" content="تجربة الثورة الصناعية الرابعة مع GEAR AI. محادثات ذكية، توليد نصوص مبدعة، وحلول ذكية.">
    <meta name="twitter:image" content="websima.png">

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      :root {
        --primary-color: #4891ff;
        --gold-color: #FFD700;
        --light-color: #f4f4f6;
        --dark-color: #111;
        --success-color: #10B981;
        --warning-color: #F59E0B;
        --danger-color: #EF4444;
      }

      body {
        font-family: 'Poppins', sans-serif;
        font-size: 16px;
        line-height: 1.5;
        background: #fff;
        overflow-x: hidden;
      }

      a {
        text-decoration: none;
        color: #333;
      }

      ul {
        list-style: none;
      }

      img {
        max-width: 100%;
      }

      /* Navbar - محدث */
      .navbar {
        background: transparent;
        padding: 15px 20px;
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
        transition: background 0.3s ease;
      }

      .navbar.scrolled {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }

      .navbar .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1300px;
        margin: 0 auto;
      }

      .navbar .main-menu ul {
        display: flex;
        align-items: center;
      }

      .navbar ul li a {
        padding: 10px 15px;
        display: block;
        font-weight: 600;
        transition: 0.3s;
        font-size: 14px;
      }

      .navbar ul li a:hover {
        color: var(--primary-color);
      }

      .navbar ul li a i {
        margin-left: 8px;
      }

      .navbar .logo h1 {
        font-size: 1.5rem;
        margin: 0;
        color: var(--primary-color);
      }

      /* تصميم جديد للثلاث شرط */
      .hamburger-button {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: 10px;
        z-index: 1000;
        flex-direction: column;
        align-items: flex-end;
      }

      .hamburger-line {
        height: 3px;
        background: #333;
        transition: 0.3s;
        margin: 3px 0;
      }

      .hamburger-line:nth-child(1) {
        width: 30px;
      }

      .hamburger-line:nth-child(2) {
        width: 24px;
      }

      .hamburger-line:nth-child(3) {
        width: 18px;
      }

      .hamburger-button.active .hamburger-line:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
        width: 30px;
      }

      .hamburger-button.active .hamburger-line:nth-child(2) {
        opacity: 0;
      }

      .hamburger-button.active .hamburger-line:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -6px);
        width: 30px;
      }

      /* Mobile Menu - محدث */
      .mobile-menu {
        position: fixed;
        top: 0;
        right: -300px;
        width: 300px;
        height: 100%;
        z-index: 999;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        box-shadow: -5px 0 25px rgba(0, 0, 0, 0.1);
        transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        padding-top: 100px;
        overflow-y: auto;
      }

      .mobile-menu.active {
        right: 0;
      }

      .mobile-menu ul {
        padding: 30px;
      }

      .mobile-menu ul li {
        margin: 25px 0;
        opacity: 0;
        transform: translateX(20px);
        animation: slideIn 0.5s forwards;
      }

      .mobile-menu ul li:nth-child(1) { animation-delay: 0.1s; }
      .mobile-menu ul li:nth-child(2) { animation-delay: 0.2s; }
      .mobile-menu ul li:nth-child(3) { animation-delay: 0.3s; }
      .mobile-menu ul li:nth-child(4) { animation-delay: 0.4s; }

      @keyframes slideIn {
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .mobile-menu ul li a {
        font-size: 18px;
        padding: 15px 20px;
        display: block;
        border-radius: 12px;
        transition: all 0.3s;
        font-weight: 600;
        background: rgba(72, 145, 255, 0.1);
        text-align: center;
      }

      .mobile-menu ul li a:hover {
        background: var(--primary-color);
        color: white;
        transform: translateX(-10px);
      }

      /* User Info Styles */
      .user-info {
        display: none;
        align-items: center;
        gap: 10px;
      }

      .user-info.active {
        display: flex;
      }

      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--primary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 14px;
        background-size: cover;
        background-position: center;
      }

      .user-avatar.premium {
        background: linear-gradient(45deg, #FFD700, #FFA500);
      }

      .subscription-status {
        background: var(--success-color);
        color: white;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
      }

      .subscription-status.expired {
        background: var(--danger-color);
      }

      .subscription-status.warning {
        background: var(--warning-color);
      }

      /* Hero Section - محدث */
      .hero {
        position: relative;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        text-align: center;
        overflow: hidden;
        margin-top: 0;
      }

      .hero-video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
      }

      .hero::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, rgba(0,0,0,0.8), rgba(0,0,0,0.4));
        z-index: -1;
      }

      .hero-content {
        z-index: 1;
        max-width: 900px;
        padding: 0 20px;
        width: 100%;
      }

      .gear-title {
        font-size: clamp(3rem, 8vw, 5rem);
        font-weight: 800;
        margin-bottom: 20px;
        background: linear-gradient(45deg, #00ffff, #0080ff, #8000ff);
        background-size: 300% 300%;
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        animation: gradientShift 8s ease infinite, glowEffect 3s ease-in-out infinite;
        text-shadow: 0 0 30px rgba(0, 255, 255, 0.3),
                     0 0 60px rgba(0, 128, 255, 0.2),
                     0 0 90px rgba(128, 0, 255, 0.1);
        filter: blur(0.5px);
        position: relative;
      }

      @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }

      @keyframes glowEffect {
        0%, 100% { filter: blur(0.5px) brightness(1); }
        50% { filter: blur(1px) brightness(1.2); }
      }

      .hero-heading {
        font-size: clamp(1.5rem, 4vw, 2.5rem);
        margin-bottom: 20px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        line-height: 1.2;
      }

      .hero-text {
        font-size: clamp(1rem, 2.5vw, 1.2rem);
        margin-bottom: 30px;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        line-height: 1.6;
      }

      .hero-buttons {
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
      }

      .hero-buttons .btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        min-width: 200px;
        padding: 16px 30px;
        border-radius: 12px;
        font-weight: 600;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255, 255, 255, 0.2);
      }

      .hero-buttons .btn i {
        font-size: 1.2rem;
      }

      /* Section Transition */
      .section-divider {
        height: 150px;
        position: relative;
        overflow: hidden;
        margin-top: -1px;
      }

      .wave {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, transparent, #f4f4f6);
        clip-path: polygon(0% 100%, 100% 100%, 100% 0%, 0% 100%);
        animation: waveAnimation 3s ease-in-out infinite;
      }

      @keyframes waveAnimation {
        0%, 100% { clip-path: polygon(0% 100%, 100% 100%, 100% 0%, 0% 100%); }
        50% { clip-path: polygon(0% 100%, 100% 100%, 100% 10%, 0% 90%); }
      }

      /* Testimonials - محدث */
      .testimonials {
        position: relative;
        padding: 100px 0;
        overflow: hidden;
        background: #f4f4f6;
      }

      .testimonials-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
      }

      .testimonials::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(244, 244, 246, 0.85);
        z-index: -1;
      }

      .testimonials .container {
        position: relative;
        z-index: 1;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .section-title {
        width: 100%;
        margin: 0 auto 60px;
        text-align: center;
        font-size: clamp(2.5rem, 5vw, 3.5rem);
        font-weight: 800;
        color: #333;
        position: relative;
        padding-bottom: 20px;
      }

      .section-title::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 100px;
        height: 4px;
        background: var(--primary-color);
        border-radius: 2px;
      }

      /* Cards Stack Animation */
      .cards-stack {
        position: relative;
        max-width: 600px;
        margin: 0 auto;
        height: 600px;
        perspective: 1000px;
      }

      .gear-card {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        opacity: 0;
        transform: translateY(100px) scale(0.9);
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
      }

      .gear-card.active {
        opacity: 1;
        transform: translateY(0) scale(1);
        z-index: 3;
      }

      .gear-card.previous {
        opacity: 0.7;
        transform: translateY(-50px) scale(0.95);
        z-index: 2;
      }

      .gear-card.next {
        opacity: 0.4;
        transform: translateY(50px) scale(0.9);
        z-index: 1;
      }

      .card-number {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 3rem;
        font-weight: 800;
        color: rgba(72, 145, 255, 0.2);
      }

      .gear-card h3 {
        font-size: 1.8rem;
        margin-bottom: 20px;
        color: var(--primary-color);
      }

      .gear-card p {
        font-size: 1.1rem;
        line-height: 1.8;
        color: #555;
        margin-bottom: 15px;
      }

      .card-indicators {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 40px;
      }

      .indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #ddd;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .indicator.active {
        background: var(--primary-color);
        transform: scale(1.3);
      }

      /* Video Section */
      .video-section {
        position: relative;
        padding: 80px 0;
        overflow: hidden;
        background: white;
      }

      .video-section-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
      }

      .video-section::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.95);
        z-index: -1;
      }

      .video-section-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;
        z-index: 1;
        max-width: 800px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .video-section-heading {
        margin-bottom: 40px;
        max-width: 700px;
        font-size: clamp(1.8rem, 4vw, 2.5rem);
        line-height: 1.4;
        color: #333;
      }

      /* USDT Coupon Styles - محدث */
      .usdt-coupon-container {
        width: 100%;
        max-width: 500px;
        margin: 0 auto;
      }

      .coupon-content {
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      .subscription-success {
        text-align: center;
        padding: 30px;
      }

      .success-icon {
        font-size: 4rem;
        color: var(--success-color);
        margin-bottom: 20px;
        animation: bounce 1s ease infinite;
      }

      @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
      }

      .subscription-details {
        background: rgba(72, 145, 255, 0.1);
        padding: 20px;
        border-radius: 15px;
        margin: 20px 0;
      }

      .subscription-details p {
        margin: 10px 0;
        font-size: 1.1rem;
      }

      /* Pricing Section - محدث بتصميم iOS */
      .pricing {
        position: relative;
        padding: 100px 0;
        overflow: hidden;
        background: #f5f5f7;
      }

      .pricing-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
      }

      .pricing::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(245, 245, 247, 0.95);
        z-index: -1;
      }

      .pricing .container-sm {
        position: relative;
        z-index: 1;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .pricing-heading {
        font-size: clamp(2rem, 5vw, 3rem);
        text-align: center;
        margin-bottom: 20px;
        color: #333;
        font-weight: 700;
      }

      .pricing-subheading {
        font-size: clamp(1.1rem, 2vw, 1.3rem);
        text-align: center;
        margin-bottom: 60px;
        color: #666;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        line-height: 1.6;
      }

      /* Carousel بتصميم iOS */
      .pricing-carousel {
        position: relative;
        max-width: 900px;
        margin: 0 auto;
        overflow: hidden;
        border-radius: 30px;
      }

      .carousel-container {
        display: flex;
        transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        touch-action: pan-y;
      }

      .ios-card {
        min-width: 100%;
        background: white;
        border-radius: 30px;
        padding: 40px;
        box-shadow: 
          0 20px 60px rgba(0, 0, 0, 0.1),
          0 0 0 1px rgba(255, 255, 255, 0.1);
        position: relative;
        backdrop-filter: blur(20px);
        overflow: hidden;
      }

      .ios-card::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, 
          transparent 0%, 
          rgba(255, 255, 255, 0.1) 50%, 
          transparent 100%);
        transform: rotate(45deg);
        animation: shimmer 3s infinite;
      }

      @keyframes shimmer {
        0% { transform: rotate(45deg) translateX(-100%); }
        100% { transform: rotate(45deg) translateX(100%); }
      }

      .ios-card .card-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .ios-card .plan-name {
        font-size: 2.5rem;
        font-weight: 800;
        margin-bottom: 10px;
        background: linear-gradient(45deg, #007AFF, #5856D6);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }

      .ios-card .plan-price {
        font-size: 4rem;
        font-weight: 900;
        color: #333;
        margin-bottom: 20px;
      }

      .ios-card .plan-price span {
        font-size: 1.5rem;
        color: #666;
      }

      .ios-card .features-list {
        list-style: none;
        margin: 30px 0;
      }

      .ios-card .features-list li {
        padding: 15px 0;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        font-size: 1.1rem;
        color: #333;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .ios-card .features-list li i {
        color: #007AFF;
      }

      .carousel-nav {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 40px;
      }

      .nav-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #ddd;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .nav-dot.active {
        background: #007AFF;
        transform: scale(1.3);
      }

      /* Subscription Form */
      .subscription-form-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(20px);
        z-index: 2000;
        display: none;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .subscription-form-overlay.active {
        display: flex;
      }

      .subscription-form {
        background: white;
        border-radius: 30px;
        padding: 40px;
        width: 100%;
        max-width: 500px;
        position: relative;
        animation: slideUp 0.5s ease;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .form-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
      }

      .form-header h3 {
        font-size: 1.8rem;
        color: #333;
      }

      .close-form {
        background: none;
        border: none;
        font-size: 2rem;
        color: #666;
        cursor: pointer;
        padding: 5px;
      }

      /* Cancel Subscription Modal */
      .cancel-modal {
        background: white;
        border-radius: 30px;
        padding: 40px;
        max-width: 500px;
        width: 100%;
        margin: 0 auto;
      }

      .cancel-warning {
        background: rgba(239, 68, 68, 0.1);
        padding: 20px;
        border-radius: 15px;
        margin: 20px 0;
        border-right: 4px solid var(--danger-color);
      }

      .loading-spinner {
        width: 60px;
        height: 60px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #007AFF;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 30px auto;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* تطبيق GEAR AI - محدث */
      .app-download {
        padding: 100px 0;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      }

      .app-download-content {
        display: grid;
        grid-template-columns: 1fr;
        gap: 50px;
        align-items: center;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      @media (min-width: 768px) {
        .app-download-content {
          grid-template-columns: 1fr 1fr;
          gap: 80px;
        }
      }

      .app-preview {
        display: flex;
        justify-content: center;
        order: -1;
      }

      @media (min-width: 768px) {
        .app-preview {
          order: 1;
        }
      }

      .phone-image {
        max-width: 300px;
        width: 100%;
        filter: drop-shadow(0 20px 40px rgba(0,0,0,0.2));
        animation: float 3s ease-in-out infinite;
      }

      @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-20px); }
      }

      /* Footer - محدث */
      .footer {
        padding: 80px 0 30px;
        background: linear-gradient(135deg, #111, #222);
        color: white;
        position: relative;
      }

      .footer::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(90deg, var(--primary-color), var(--gold-color));
      }

      .footer .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .footer-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 50px;
        text-align: center;
      }

      @media (min-width: 768px) {
        .footer-grid {
          grid-template-columns: repeat(4, 1fr);
          text-align: right;
          gap: 40px;
        }
      }

      .footer h4 {
        margin-bottom: 25px;
        font-size: 1.5rem;
        font-weight: 600;
        color: white;
        position: relative;
        padding-bottom: 15px;
      }

      .footer h4::after {
        content: '';
        position: absolute;
        bottom: 0;
        right: 0;
        width: 50px;
        height: 3px;
        background: var(--primary-color);
        border-radius: 2px;
      }

      .footer ul li {
        line-height: 2.5;
      }

      .footer a {
        color: #ccc;
        transition: all 0.3s ease;
        display: inline-block;
      }

      .footer a:hover {
        color: var(--primary-color);
        transform: translateX(-5px);
      }

      .social-icons {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 30px;
      }

      @media (min-width: 768px) {
        .social-icons {
          justify-content: flex-start;
        }
      }

      .social-icons a {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.3rem;
        transition: all 0.3s ease;
      }

      .social-icons a:hover {
        background: var(--primary-color);
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(72, 145, 255, 0.3);
      }

      /* Utility Classes */
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .container-sm {
        max-width: 800px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Buttons */
      .btn {
        display: inline-block;
        padding: 14px 28px;
        background: var(--light-color);
        color: #333;
        font-weight: 600;
        text-decoration: none;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        text-align: center;
        transition: all 0.3s ease;
        font-size: 15px;
      }

      .btn:hover {
        opacity: 0.9;
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      }

      .btn-primary {
        background: var(--primary-color);
        color: #fff;
        border-radius: 12px;
      }

      .btn-success {
        background: var(--success-color);
        color: white;
      }

      .btn-danger {
        background: var(--danger-color);
        color: white;
      }

      .btn-block {
        display: block;
        width: 100%;
      }

      /* Text Classes */
      .text-xxl {
        font-size: clamp(2.2rem, 5vw, 3.2rem);
        line-height: 1.2;
        font-weight: 700;
        margin: 35px 0 20px;
      }

      .text-xl {
        font-size: clamp(1.6rem, 4vw, 2.4rem);
        line-height: 1.4;
        font-weight: 600;
        margin: 30px 0 18px;
      }

      .text-lg {
        font-size: clamp(1.4rem, 3vw, 2rem);
        line-height: 1.4;
        font-weight: 500;
        margin: 25px 0 15px;
      }

      .text-md {
        font-size: clamp(1.1rem, 2vw, 1.4rem);
        line-height: 1.5;
        font-weight: normal;
        margin: 20px 0 12px;
      }

      .text-sm {
        font-size: 1rem;
        line-height: 1.5;
        font-weight: normal;
        margin: 12px 0 8px;
      }

      .text-center {
        text-align: center;
      }

      .bg-light {
        background: var(--light-color);
        color: #333;
      }

      .bg-black {
        background: #000;
        color: #fff;
      }

      /* Scroll Animations */
      .scroll-animate {
        opacity: 0;
        transform: translateY(40px);
        transition: all 0.8s ease;
      }

      .scroll-animate.show {
        opacity: 1;
        transform: translateY(0);
      }

      .scroll-animate-left {
        opacity: 0;
        transform: translateX(-40px);
        transition: all 0.8s ease;
      }

      .scroll-animate-left.show {
        opacity: 1;
        transform: translateX(0);
      }

      .scroll-animate-right {
        opacity: 0;
        transform: translateX(40px);
        transition: all 0.8s ease;
      }

      .scroll-animate-right.show {
        opacity: 1;
        transform: translateX(0);
      }

      .scroll-animate-scale {
        opacity: 0;
        transform: scale(0.9);
        transition: all 0.8s ease;
      }

      .scroll-animate-scale.show {
        opacity: 1;
        transform: scale(1);
      }

      /* Alerts */
      .alert {
        padding: 15px 20px;
        border-radius: 12px;
        margin-bottom: 20px;
        font-size: 15px;
        text-align: center;
        font-weight: 600;
      }

      .alert-success {
        background: var(--success-color);
        color: white;
      }

      .alert-error {
        background: var(--danger-color);
        color: white;
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        z-index: 2000;
        justify-content: center;
        align-items: center;
        padding: 20px;
        box-sizing: border-box;
        backdrop-filter: blur(20px);
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        background-color: #fff;
        padding: 40px;
        border-radius: 25px;
        width: 100%;
        max-width: 450px;
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
        max-height: 90vh;
        overflow-y: auto;
        animation: modalSlideUp 0.4s ease;
      }

      @keyframes modalSlideUp {
        from {
          opacity: 0;
          transform: translateY(60px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
      }

      .modal-header h2 {
        margin: 0;
        font-size: 1.8rem;
        font-weight: 700;
      }

      .close-modal {
        background: none;
        border: none;
        font-size: 28px;
        cursor: pointer;
        color: #666;
        transition: color 0.3s;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .close-modal:hover {
        background: rgba(0,0,0,0.1);
        color: #333;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 10px;
        font-weight: 600;
        font-size: 15px;
        color: #333;
      }

      .form-group input {
        width: 100%;
        padding: 16px;
        border: 2px solid #e1e5e9;
        border-radius: 12px;
        font-size: 15px;
        box-sizing: border-box;
        transition: all 0.3s;
        background: #f8f9fa;
      }

      .form-group input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(72, 145, 255, 0.1);
        background: white;
      }

      .password-input {
        position: relative;
      }

      .toggle-password {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        cursor: pointer;
        color: #666;
        padding: 0;
        font-size: 16px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .toggle-password:hover {
        background: rgba(0,0,0,0.05);
      }

      .form-footer {
        margin-top: 25px;
        text-align: center;
      }

      .form-footer a {
        color: var(--primary-color);
        cursor: pointer;
        text-decoration: underline;
        font-weight: 600;
        transition: color 0.3s;
      }

      .form-footer a:hover {
        color: #1a73e8;
      }

      /* Days Counter */
      .days-counter {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        background: rgba(16, 185, 129, 0.1);
        padding: 10px 20px;
        border-radius: 25px;
        margin: 10px 0;
      }

      .days-counter i {
        color: var(--success-color);
      }

      /* Media Queries */
      @media (max-width: 768px) {
        .navbar .main-menu {
          display: none;
        }
        
        .hamburger-button {
          display: flex;
        }
        
        .hero {
          height: 100vh;
          padding-top: 80px;
        }
        
        .gear-title {
          font-size: clamp(2.5rem, 6vw, 4rem);
        }
        
        .hero-buttons {
          flex-direction: column;
          gap: 15px;
        }
        
        .hero-buttons .btn {
          width: 100%;
          max-width: 300px;
          margin: 0 auto;
        }
        
        .testimonials,
        .video-section,
        .pricing,
        .app-download {
          padding: 60px 0;
        }
        
        .section-title {
          font-size: clamp(2rem, 4vw, 3rem);
        }
        
        .cards-stack {
          height: 500px;
        }
        
        .gear-card {
          padding: 30px;
        }
        
        .ios-card {
          padding: 30px 20px;
        }
        
        .footer-grid {
          grid-template-columns: 1fr;
          gap: 40px;
          text-align: center;
        }
        
        .footer h4::after {
          right: 50%;
          transform: translateX(50%);
        }
        
        .social-icons {
          justify-content: center;
        }
      }

      @media (max-width: 480px) {
        .container,
        .container-sm {
          padding: 0 15px;
        }
        
        .gear-title {
          font-size: 2.8rem;
        }
        
        .hero-heading {
          font-size: 1.5rem;
        }
        
        .hero-text {
          font-size: 1.1rem;
        }
        
        .cards-stack {
          height: 450px;
        }
        
        .gear-card {
          padding: 25px;
        }
        
        .ios-card {
          padding: 25px 15px;
        }
        
        .ios-card .plan-price {
          font-size: 3rem;
        }
        
        .subscription-form {
          padding: 30px 20px;
        }
        
        .modal-content {
          padding: 30px 20px;
        }
      }
    </style>
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <!-- Modal for Signup/Login -->
    <div class="modal" id="authModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">إنشاء حساب جديد</h2>
          <button class="close-modal">&times;</button>
        </div>
        
        <div id="authAlert"></div>
        
        <form id="signupForm">
          <div class="form-group">
            <label for="signupUsername">اسم المستخدم</label>
            <input type="text" id="signupUsername" required />
          </div>
          <div class="form-group">
            <label for="signupEmail">البريد الإلكتروني</label>
            <input type="email" id="signupEmail" required />
          </div>
          <div class="form-group">
            <label for="signupPassword">كلمة المرور</label>
            <div class="password-input">
              <input type="password" id="signupPassword" required />
              <button type="button" class="toggle-password">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          <div class="form-group">
            <label for="confirmPassword">تأكيد كلمة المرور</label>
            <div class="password-input">
              <input type="password" id="confirmPassword" required />
              <button type="button" class="toggle-password">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-block">إنشاء حساب</button>
          <div class="form-footer">
            <p>لديك حساب بالفعل؟ <a id="switchToLogin">تسجيل الدخول</a></p>
          </div>
        </form>

        <form id="loginForm" style="display: none">
          <div class="form-group">
            <label for="loginEmail">البريد الإلكتروني</label>
            <input type="email" id="loginEmail" required />
          </div>
          <div class="form-group">
            <label for="loginPassword">كلمة المرور</label>
            <div class="password-input">
              <input type="password" id="loginPassword" required />
              <button type="button" class="toggle-password">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-block">تسجيل الدخول</button>
          <div class="form-footer">
            <p>ليس لديك حساب؟ <a id="switchToSignup">إنشاء حساب</a></p>
          </div>
        </form>
      </div>
    </div>

    <!-- Subscription Form Modal -->
    <div class="subscription-form-overlay" id="subscriptionForm">
      <div class="subscription-form">
        <div class="form-header">
          <h3 id="subscriptionPlanName">اشتراك الخطة</h3>
          <button class="close-form">&times;</button>
        </div>
        
        <div id="subscriptionAlert"></div>
        
        <form id="subscriptionDetailsForm">
          <div class="form-group">
            <label for="subscriptionPhone">رقم الهاتف</label>
            <input type="tel" id="subscriptionPhone" required />
          </div>
          <div class="form-group">
            <label for="subscriptionName">الاسم</label>
            <input type="text" id="subscriptionName" required />
          </div>
          <div class="form-group">
            <label>سعر الاشتراك</label>
            <div class="alert alert-success" id="subscriptionPrice">20 جنيه</div>
          </div>
          <div class="form-group">
            <label>ملاحظات</label>
            <div class="alert alert-warning" id="subscriptionNotes">
              يمكنك التراجع عن الاشتراك في أي وقت خلال 15 يوم المقبلة
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-block">
            <i class="fas fa-shopping-cart"></i> اشترك الآن
          </button>
        </form>
      </div>
    </div>

    <!-- Cancel Subscription Modal -->
    <div class="modal" id="cancelModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>إلغاء الاشتراك</h2>
          <button class="close-modal">&times;</button>
        </div>
        
        <div id="cancelAlert"></div>
        
        <div class="cancel-warning">
          <h4><i class="fas fa-exclamation-triangle"></i> تحذير هام</h4>
          <p>أنت على وشك إلغاء اشتراكك معنا. يجب العلم أنه:</p>
          <ul style="margin: 15px 0; padding-right: 20px;">
            <li>سيتم محاسبتك على عدد الأيام التي كنت مشتركًا فيها</li>
            <li>يتم خصم 3 جنيه لكل 5 أيام من الاستخدام</li>
            <li>إذا لم يتجاوز حسابك 100 رسالة، سيتم استرداد كامل المبلغ</li>
          </ul>
        </div>
        
        <div class="subscription-details">
          <p><strong>نوع الاشتراك:</strong> <span id="cancelPlanType">-</span></p>
          <p><strong>اسم المستخدم:</strong> <span id="cancelUserName">-</span></p>
          <p><strong>الأيام المتبقية:</strong> <span id="cancelRemainingDays">-</span> يوم</p>
        </div>
        
        <button class="btn btn-danger btn-block" id="confirmCancelBtn">
          <i class="fas fa-money-bill-wave"></i> استرجاع الأموال
        </button>
      </div>
    </div>

    <!-- Cancel Loading Modal -->
    <div class="modal" id="cancelLoadingModal">
      <div class="modal-content">
        <div class="loading-spinner"></div>
        <p class="text-center" style="margin-top: 20px; font-size: 1.1rem;">
          يتم التحقق من اشتراكك الآن...
        </p>
      </div>
    </div>

    <nav class="navbar">
      <div class="container">
        <div class="logo">
          <a href="index.html">
            <h1 style="display: none;">GEAR AI</h1>
          </a>
        </div>

        <div class="main-menu">
          <ul>
            <li>
              <a href="gear.html">التحدث مع GEAR</a>
            </li>
            <li>
              <a href="#pricing">الاشتراكات</a>
            </li>
            <li class="user-info" id="userInfo">
              <div class="subscription-status" id="subscriptionStatus">30 يوم متبقي</div>
              <div class="user-avatar" id="userAvatar"></div>
              <span id="userName"></span>
              <a class="btn" href="#" id="logoutBtn" style="margin-right: 10px;"> 
                <i class="fas fa-sign-out-alt"></i> تسجيل الخروج 
              </a>
            </li>
            <li>
              <a class="btn btn-primary" href="#" id="loginBtn"> 
                <i class="fas fa-user-plus"></i> إنشاء حساب 
              </a>
            </li>
          </ul>
        </div>

        <!-- Hamburger Button -->
        <button class="hamburger-button">
          <div class="hamburger-line"></div>
          <div class="hamburger-line"></div>
          <div class="hamburger-line"></div>
        </button>
        
        <div class="mobile-menu">
          <ul>
            <li>
              <a href="gear.html">التحدث مع GEAR</a>
            </li>
            <li>
              <a href="#pricing">الاشتراكات</a>
            </li>
            <li class="user-info" id="mobileUserInfo" style="display: none">
              <div class="subscription-status" id="mobileSubscriptionStatus">30 يوم متبقي</div>
              <div class="user-avatar" id="mobileUserAvatar"></div>
              <span id="mobileUserName"></span>
              <a class="btn" href="#" id="mobileLogoutBtn" style="margin-top: 10px;"> 
                <i class="fas fa-sign-out-alt"></i> تسجيل الخروج 
              </a>
            </li>
            <li>
              <a class="btn btn-primary" href="#" id="mobileLoginBtn"> 
                <i class="fas fa-user-plus"></i> إنشاء حساب 
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
      <video autoplay muted loop class="hero-video">
        <source src="HERO.mp4" type="video/mp4">
        متصفحك لا يدعم تشغيل الفيديو.
      </video>
      <div class="hero-content">
        <h1 class="gear-title scroll-animate">
          GEAR AI
        </h1>
        <h2 class="hero-heading scroll-animate">
          مستقبل الذكاء الاصطناعي بين يديك
        </h2>
        <p class="hero-text scroll-animate">
          اكتشف قوة الذكاء الاصطناعي المتطور الذي يغير طريقة عملك وحياتك. حلول ذكية، إبداعية، وفعالة.
        </p>
        <div class="hero-buttons scroll-animate" id="heroButtons">
          <!-- سيتم تعبئة الأزرار ديناميكيًا بناءً على حالة المستخدم -->
        </div>
      </div>
    </section>

    <!-- Section Transition -->
    <div class="section-divider">
      <div class="wave"></div>
    </div>

    <!-- ما هو GEAR AI -->
    <section class="testimonials" id="about">
      <div class="container">
        <h2 class="section-title scroll-animate">ما هو GEAR AI</h2>
        
        <div class="cards-stack">
          <div class="gear-card active" data-index="0">
            <div class="card-number">01</div>
            <h3>نموذج متعدد</h3>
            <p>هو شات مع ذكاء اصطناعي يعمل من خلال أكثر من موديل مثل (CHATGPT, DEEPSEEK, GEMINI)</p>
            <p>نقدم لك تجربة محادثة متكاملة مع أفضل نماذج الذكاء الاصطناعي العالمية في مكان واحد.</p>
          </div>
          
          <div class="gear-card next" data-index="1">
            <div class="card-number">02</div>
            <h3>الاستخدامات اليومية</h3>
            <p>أهم الاستخدامات لهذا الذكاء الاصطناعي هي تسهيل الحياة اليومية والإجابة عن أسئلتك بدون أي أخطاء أو تأخير</p>
            <p>سواء كنت طالبًا، مبرمجًا، كاتبًا، أو صاحب عمل، GEAR AI سيكون مساعدك المثالي.</p>
          </div>
          
          <div class="gear-card next" data-index="2">
            <div class="card-number">03</div>
            <h3>التطوير والبرمجة</h3>
            <p>يمكن استخدامه في كتابة الأكواد البرمجية مثل تصميم مواقع ويب أو تطبيقات هاتف وتسهيل طريق التعلم</p>
            <p>مطور برمجيات محترف</p>
            <p>يدعم أكثر من 20 لغة برمجية مع شرح تفصيلي للأكواد.</p>
          </div>
        </div>
        
        <div class="card-indicators">
          <div class="indicator active" data-index="0"></div>
          <div class="indicator" data-index="1"></div>
          <div class="indicator" data-index="2"></div>
        </div>
      </div>
    </section>

    <!-- Video/Promo Code Section -->
    <section class="video-section" id="coupon">
      <div class="container">
        <div class="video-section-content">
          <h2 class="video-section-heading text-xl scroll-animate">
            هل لديك كود اشتراك؟ ادخله الآن واستمتع باشتراكك المميز في GEAR AI
          </h2>
          <div class="usdt-coupon-container scroll-animate-scale">
            <div id="couponContent">
              <div class="coupon-content">
                <div class="coupon-header">
                  <h2>كود اشتراك GEAR AI</h2>
                </div>
                
                <div id="promoCodeAlert"></div>
                <form class="promo-code-form" id="promoCodeForm">
                  <div class="input-group">
                    <label for="promo-code">أدخل كود الاشتراك</label>
                    <input type="text" id="promo-code" class="input-field" placeholder="ادخل هنا" required>
                  </div>
                  
                  <button type="submit" class="btn-coupon btn-primary-coupon">
                    <i class="fas fa-gift"></i>
                    تفعيل الكود
                  </button>
                </form>
              </div>
              
              <p class="text-center" style="margin-top: 25px; color: rgba(0, 0, 0, 0.9); font-size: 15px;">
                ليس لديك كود اشتراك؟ 
                <button class="get-code-btn" id="getCodeBtn">اشترك الآن واحصل عليه</button>
              </p>
            </div>
            
            <div id="subscriptionSuccess" style="display: none;">
              <div class="subscription-success">
                <div class="success-icon">
                  <i class="fas fa-check-circle"></i>
                </div>
                <h3>تم الاشتراك بنجاح! 🎉</h3>
                <div class="subscription-details">
                  <p><strong>الكود:</strong> <span id="usedPromoCode"></span></p>
                  <p><strong>الاسم:</strong> <span id="subscriberName"></span></p>
                  <div class="days-counter">
                    <i class="fas fa-calendar-alt"></i>
                    <span>الأيام المتبقية: <strong id="remainingDaysCount">30</strong> يوم</span>
                  </div>
                </div>
                <button class="btn btn-danger btn-block" id="cancelSubscriptionBtn">
                  <i class="fas fa-ban"></i> إلغاء الاشتراك
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Pricing -->
    <section class="pricing" id="pricing">
      <div class="container-sm">
        <h3 class="pricing-heading text-xl scroll-animate">اختر خطة GEAR AI المناسبة لك</h3>
        <p class="pricing-subheading text-md scroll-animate">
          ابدأ مجانًا وقم بالترقية عندما تكون مستعدًا. حلول ذكية تنمو معك.
        </p>
        
        <div class="pricing-carousel">
          <div class="carousel-container" id="carouselContainer">
            <!-- سيتم تعبئة الكروت ديناميكيًا -->
          </div>
          
          <div class="carousel-nav" id="carouselNav">
            <!-- سيتم تعبئة نقاط التنقل ديناميكيًا -->
          </div>
        </div>
        
        <p class="pricing-footer text-center scroll-animate" style="margin-top: 40px; color: #666; font-size: 15px;">
          جميع الأسعار بالجنيه المصري. يمكنك التراجع عن الاشتراك في أي وقت.
        </p>
      </div>
    </section>

    <!-- تطبيق GEAR AI للاندرويد -->
   <!-- تطبيق GEAR AI للاندرويد - مع إمكانية إضافة صورة -->
<section class="app-download" id="download">
    <div class="container">
        <div class="section-header scroll-animate">
            <h2 class="section-title">تطبيق GEAR AI</h2>
            <p class="section-subtitle">تجربة الذكاء الاصطناعي في جيبك. حمل التطبيق الآن واستمتع بميزات حصرية!</p>
        </div>
        
        <div class="app-download-content">
            <!-- معلومات التطبيق -->
            <div class="app-info">
                <div class="app-stats scroll-animate-left">
                    <div class="stat-item">
                        <div class="stat-number">4.8</div>
                        <div class="stat-label">
                            <div class="stars">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <span>تقييم المستخدمين</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">50K+</div>
                        <div class="stat-label">
                            <i class="fas fa-download"></i>
                            <span>تحميل نشط</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">10K+</div>
                        <div class="stat-label">
                            <i class="fas fa-comment"></i>
                            <span>مراجعة إيجابية</span>
                        </div>
                    </div>
                </div>

            
                <div class="download-section scroll-animate-scale">
                    <div class="download-card">
                        <div class="download-header">
                            <h3><i class="fas fa-mobile-alt"></i> حمل التطبيق الآن</h3>
                            <p class="version">الإصدار 1.7 - محدث</p>
                        </div>
                        
                        <div class="download-info">
                            <div class="info-item">
                                <i class="fas fa-check-circle"></i>
                                <span>حجم صغير 15MB</span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-check-circle"></i>
                                <span>متوافق مع أندرويد 8+</span>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-check-circle"></i>
                                <span>بدون إعلانات مزعجة</span>
                            </div>
                        </div>
                        
                        <a href="https://apk.e-droid.net/apk/app3825614-q274za.apk?v=2" 
                           class="download-btn-main" 
                           download>
                            <div class="btn-content">
                                <div class="btn-icon">
                                    <i class="fas fa-download"></i>
                                </div>
                                <div class="btn-text">
                                    <span class="btn-label">تحميل مباشر</span>
                                    <span class="btn-subtitle">GEAR AI v1.7</span>
                                </div>
                            </div>
                            <div class="btn-badge">
                                <i class="fas fa-arrow-down"></i>
                            </div>
                        </a>
                        
                        <div class="download-footer">
                            <p class="security-note">
                                <i class="fas fa-shield-check"></i>
                                ملف آمن 100% - تم فحصه ضد الفيروسات
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- معاينة التطبيق بالصورة الخاصة بك -->
            <div class="app-preview">
                <div class="phone-preview-container scroll-animate-right">
                    <!-- ارفع صورتك هنا -->
                    <div class="phone-image-wrapper">
                        <!-- استبدل src بالمسار الخاص بصورتك -->
                        <img src="phon.png" 
                             alt="GEAR AI تطبيق الهاتف" 
                             class="phone-preview-image">
                        
                        <!-- تأثيرات على الصورة -->
                        <div class="image-effects">
                            <div class="glow-effect"></div>
                            <div class="float-effect"></div>
                        </div>
                    </div>
                    
                 
    </div>
</section>

<style>
/* قسم التطبيق - مع إمكانية إضافة صورة */
.app-download {
    padding: 120px 0;
    background: linear-gradient(135deg, #f8fafc 0%, #f0f4f8 100%);
    position: relative;
    overflow: hidden;
}

.app-download::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 300px;
    height: 300px;
    background: linear-gradient(135deg, rgba(72, 145, 255, 0.1) 0%, rgba(72, 145, 255, 0.05) 100%);
    border-radius: 50%;
    transform: translate(50%, -50%);
}

.app-download::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 200px;
    height: 200px;
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%);
    border-radius: 50%;
    transform: translate(-50%, 50%);
}

.section-header {
    text-align: center;
    margin-bottom: 80px;
}

.section-title {
    font-size: clamp(2.5rem, 5vw, 3.5rem);
    font-weight: 800;
    color: #1a202c;
    margin-bottom: 20px;
    background: linear-gradient(135deg, var(--primary-color), #1e40af);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.section-subtitle {
    font-size: 1.2rem;
    color: #64748b;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
}

.app-download-content {
    display: grid;
    grid-template-columns: 1fr;
    gap: 80px;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

@media (min-width: 992px) {
    .app-download-content {
        grid-template-columns: 1fr 1fr;
        gap: 100px;
    }
}

/* إحصائيات التطبيق */
.app-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-bottom: 50px;
    background: white;
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
}

.stat-item {
    text-align: center;
}

.stat-number {
    font-size: 2.2rem;
    font-weight: 800;
    color: var(--primary-color);
    margin-bottom: 8px;
    line-height: 1;
}

.stat-label {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
}

.stars {
    color: #fbbf24;
    font-size: 0.9rem;
}

.stat-label span {
    font-size: 0.9rem;
    color: #64748b;
    font-weight: 500;
}

.stat-label i {
    color: var(--primary-color);
    margin-bottom: 5px;
}

/* ميزات التطبيق */
.app-features-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-bottom: 40px;
}

.feature-card {
    background: white;
    padding: 25px;
    border-radius: 16px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.03);
    transition: all 0.3s ease;
    border: 1px solid #f1f5f9;
}

.feature-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(72, 145, 255, 0.1);
    border-color: var(--primary-color);
}

.feature-icon {
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, rgba(72, 145, 255, 0.1), rgba(72, 145, 255, 0.05));
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 20px;
}

.feature-icon i {
    font-size: 1.5rem;
    color: var(--primary-color);
}

.feature-content h4 {
    font-size: 1.2rem;
    color: #1e293b;
    margin-bottom: 10px;
    font-weight: 600;
}

.feature-content p {
    font-size: 0.95rem;
    color: #64748b;
    line-height: 1.5;
    margin: 0;
}

/* قسم التحميل */
.download-section {
    margin-top: 40px;
}

.download-card {
    background: white;
    border-radius: 24px;
    padding: 40px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08);
    border: 1px solid #f1f5f9;
}

.download-header {
    text-align: center;
    margin-bottom: 30px;
}

.download-header h3 {
    font-size: 1.8rem;
    color: #1e293b;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.download-header h3 i {
    color: var(--primary-color);
}

.version {
    color: #94a3b8;
    font-size: 0.9rem;
    background: #f8fafc;
    padding: 5px 15px;
    border-radius: 20px;
    display: inline-block;
}

.download-info {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-bottom: 30px;
    flex-wrap: wrap;
}

.info-item {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #475569;
    font-size: 0.95rem;
}

.info-item i {
    color: var(--success-color);
}

.download-btn-main {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(135deg, var(--primary-color), #1e40af);
    color: white;
    padding: 20px 30px;
    border-radius: 16px;
    text-decoration: none;
    transition: all 0.3s ease;
    margin-bottom: 20px;
    box-shadow: 0 10px 25px rgba(72, 145, 255, 0.3);
}

.download-btn-main:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 35px rgba(72, 145, 255, 0.4);
    background: linear-gradient(135deg, #1e40af, var(--primary-color));
}

.btn-content {
    display: flex;
    align-items: center;
    gap: 15px;
}

.btn-icon {
    font-size: 2rem;
}

.btn-text {
    display: flex;
    flex-direction: column;
}

.btn-label {
    font-size: 1.2rem;
    font-weight: 700;
}

.btn-subtitle {
    font-size: 0.9rem;
    opacity: 0.9;
}

.btn-badge {
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: bounce 2s infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

.download-footer {
    text-align: center;
}

.security-note {
    color: #64748b;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.security-note i {
    color: var(--success-color);
}

/* معاينة التطبيق بالصورة */
.app-preview {
    display: flex;
    justify-content: center;
}

.phone-preview-container {
    text-align: center;
}

.phone-image-wrapper {
    position: relative;
    display: inline-block;
    margin-bottom: 30px;
}

.phone-preview-image {
    width: 100%;
    max-width: 350px;
    height: auto;
    border-radius: 40px;
    box-shadow: 
        0 40px 80px rgba(0, 0, 0, 0.2),
        0 0 0 1px rgba(255, 255, 255, 0.1);
    position: relative;
    z-index: 2;
    transition: transform 0.5s ease;
}

.phone-preview-image:hover {
    transform: translateY(-10px) scale(1.02);
}

/* تأثيرات على الصورة */
.image-effects {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 1;
}

.glow-effect {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 120%;
    height: 120%;
    background: radial-gradient(circle, rgba(72, 145, 255, 0.15) 0%, transparent 70%);
    border-radius: 50%;
    filter: blur(20px);
    animation: pulse 3s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
    50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.05); }
}

.float-effect {
    position: absolute;
    width: 100%;
    height: 100%;
    animation: float 6s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    33% { transform: translateY(-10px) rotate(1deg); }
    66% { transform: translateY(10px) rotate(-1deg); }
}

/* معلومات تحت الصورة */
.preview-info {
    margin-top: 30px;
}

.preview-info h4 {
    font-size: 1.5rem;
    color: #1e293b;
    margin-bottom: 10px;
    font-weight: 700;
}

.preview-info p {
    color: #64748b;
    margin-bottom: 20px;
    font-size: 1rem;
}

.preview-features {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
}

.preview-feature {
    display: flex;
    align-items: center;
    gap: 8px;
    background: white;
    padding: 10px 20px;
    border-radius: 25px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    color: #475569;
    font-size: 0.9rem;
}

.preview-feature i {
    color: var(--success-color);
}

/* معلومات إضافية */
.additional-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 30px;
    margin-top: 80px;
    padding: 0 20px;
}

.info-card {
    text-align: center;
    padding: 40px 30px;
    background: white;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    border: 1px solid #f1f5f9;
}

.info-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px rgba(72, 145, 255, 0.1);
    border-color: var(--primary-color);
}

.info-card i {
    font-size: 2.5rem;
    color: var(--primary-color);
    margin-bottom: 20px;
    background: linear-gradient(135deg, rgba(72, 145, 255, 0.1), rgba(72, 145, 255, 0.05));
    width: 70px;
    height: 70px;
    line-height: 70px;
    border-radius: 50%;
    margin: 0 auto 25px;
}

.info-card h4 {
    font-size: 1.3rem;
    color: #1e293b;
    margin-bottom: 15px;
    font-weight: 600;
}

.info-card p {
    color: #64748b;
    line-height: 1.6;
    margin: 0;
    font-size: 0.95rem;
}

/* دليل التثبيت */
.installation-guide {
    margin-top: 100px;
    text-align: center;
}

.guide-title {
    font-size: 2rem;
    color: #1e293b;
    margin-bottom: 50px;
    font-weight: 700;
}

.steps-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
}

.step {
    background: white;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
    position: relative;
    transition: all 0.3s ease;
    border: 1px solid #f1f5f9;
}

.step:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(72, 145, 255, 0.1);
    border-color: var(--primary-color);
}

.step-number {
    position: absolute;
    top: -20px;
    right: -20px;
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, var(--primary-color), #1e40af);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: 700;
    box-shadow: 0 5px 15px rgba(72, 145, 255, 0.3);
}

.step-content {
    text-align: right;
}

.step-content h4 {
    font-size: 1.2rem;
    color: #1e293b;
    margin-bottom: 10px;
    font-weight: 600;
}

.step-content p {
    color: #64748b;
    line-height: 1.6;
    margin: 0;
    font-size: 0.95rem;
}

/* Responsive Design */
@media (max-width: 768px) {
    .app-download {
        padding: 80px 0;
    }
    
    .section-header {
        margin-bottom: 60px;
    }
    
    .app-stats {
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        padding: 20px;
    }
    
    .stat-number {
        font-size: 1.8rem;
    }
    
    .app-features-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .download-card {
        padding: 30px 20px;
    }
    
    .phone-preview-image {
        max-width: 280px;
    }
    
    .additional-info {
        grid-template-columns: 1fr;
        gap: 20px;
        margin-top: 60px;
    }
    
    .info-card {
        padding: 30px 20px;
    }
    
    .steps-container {
        grid-template-columns: 1fr;
        gap: 40px;
    }
    
    .step {
        padding: 25px;
    }
}

@media (max-width: 480px) {
    .section-title {
        font-size: 2.2rem;
    }
    
    .app-stats {
        grid-template-columns: repeat(3, 1fr);
        padding: 15px;
    }
    
    .stat-number {
        font-size: 1.5rem;
    }
    
    .phone-preview-image {
        max-width: 250px;
    }
    
    .download-info {
        flex-direction: column;
        align-items: center;
        gap: 15px;
    }
    
    .preview-features {
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }
    
    .preview-feature {
        width: 100%;
        justify-content: center;
    }
}
</style>

<script>
// إضافة تفاعلية للقسم
document.addEventListener('DOMContentLoaded', function() {
    // تأثيرات عند المرور على الصورة
    const phoneImage = document.querySelector('.phone-preview-image');
    if (phoneImage) {
        // إضافة تأثير التحويم
        phoneImage.addEventListener('mouseenter', function() {
            this.style.transition = 'transform 0.5s ease';
        });
        
        // إضافة تأثير النقر
        phoneImage.addEventListener('click', function() {
            this.style.transform = 'scale(1.05)';
            setTimeout(() => {
                this.style.transform = '';
            }, 300);
        });
    }
    
    // إضافة تأثيرات للكروت
    const featureCards = document.querySelectorAll('.feature-card');
    featureCards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
        card.addEventListener('mouseenter', function() {
            this.style.zIndex = '10';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.zIndex = '';
        });
    });
    
    // إضافة تأثيرات للخطوات
    const steps = document.querySelectorAll('.step');
    steps.forEach((step, index) => {
        step.style.animationDelay = `${index * 0.2}s`;
    });
    
    // تأثيرات إضافية للصورة
    const imageWrapper = document.querySelector('.phone-image-wrapper');
    if (imageWrapper) {
        // إضافة تأثير الاهتزاز الخفيف
        setInterval(() => {
            if (Math.random() > 0.7) {
                imageWrapper.style.animation = 'shake 0.5s ease';
                setTimeout(() => {
                    imageWrapper.style.animation = '';
                }, 500);
            }
        }, 3000);
    }
});

// إضافة كود لتحميل الصورة
function loadCustomImage(imageUrl) {
    const phoneImage = document.querySelector('.phone-preview-image');
    if (phoneImage) {
        phoneImage.src = imageUrl;
        phoneImage.style.opacity = '0';
        setTimeout(() => {
            phoneImage.style.transition = 'opacity 0.5s ease';
            phoneImage.style.opacity = '1';
        }, 10);
    }
}

// يمكنك استدعاء هذه الدالة لإضافة صورتك:
// loadCustomImage('path/to/your/image.jpg');
</script>

<!-- Footer -->
<footer class="footer bg-black">
  <div class="container">
    <div class="footer-grid">
      <div>
        <h4>GEAR AI</h4>
        <p style="color: #aaa; line-height: 1.6; margin-top: 10px;">
          مستقبل الذكاء الاصطناعي بين يديك. نوفر حلول ذكية وإبداعية لجميع احتياجاتك.
        </p>
        <div class="social-icons">
          <a href="#"><i class="fab fa-facebook"></i></a> 
          <a href="tel:+201148179176"><i class="fab fa-whatsapp"></i></a> 
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
        </div>
      </div>
      <div>
        <h4>روابط سريعة</h4>
        <ul>
          <li><a href="gear.html">التحدث مع GEAR</a></li>
          <li><a href="#about">ما هو GEAR AI</a></li>
          <li><a href="#pricing">الاشتراكات</a></li>
          <li><a href="#download">تحميل التطبيق</a></li>
        </ul>
      </div>
      <div>
        <h4>الدعم</h4>
        <ul>
          <li><a href="#faq">الأسئلة الشائعة</a></li>
          <li><a href="#privacy">سياسة الخصوصية</a></li>
          <li><a href="#terms">الشروط والأحكام</a></li>
          <li><a href="#contact">الدعم الفني</a></li>
        </ul>
      </div>
      <div>
        <h4>اتصل بنا</h4>
        <ul>
          <li>
            <a href="mailto:support@gear-ai.com">
              <i class="fas fa-envelope" style="margin-left: 8px;"></i>
              mostafefareg3@G.com
            </a>
          </li>
          <li>
            <a href="tel:+201148179176">
              <i class="fas fa-phone" style="margin-left: 8px;"></i>
              +20 114 817 9176
            </a>
          </li>
          <li style="margin-top: 20px; color: #aaa; font-size: 0.9rem;">
            <i class="fas fa-clock" style="margin-left: 8px;"></i>
            الدعم متاح 24/7
          </li>
        </ul>
      </div>
    </div>
    <div class="text-center" style="margin-top: 50px; padding-top: 25px; border-top: 1px solid #444;">
      <p style="color: #999; font-size: 14px;">&copy; 2024 جميع حقوق الطبع والنشر تذهب الى M0S7A5E - GEAR AI WEBSITE.</p>
      <p style="color: #777; font-size: 13px; margin-top: 10px;">تم التطوير بأحدث تقنيات الويب والذكاء الاصطناعي</p>
    </div>
  </div>
</footer>

<script>
  // Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyCffrRr-wYBeiAf7GML6Xs3kQg-14mLFhQ",
    authDomain: "prompat-76c51.firebaseapp.com",
    projectId: "prompat-76c51",
    storageBucket: "prompat-76c51.firebasestorage.app",
    messagingSenderId: "663109200073",
    appId: "1:663109200073:web:9da9a15649a88028b68518",
    measurementId: "G-HKL1XTBX6H"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  // DOM Elements
  const authModal = document.getElementById('authModal');
  const loginForm = document.getElementById('loginForm');
  const signupForm = document.getElementById('signupForm');
  const loginBtn = document.getElementById('loginBtn');
  const mobileLoginBtn = document.getElementById('mobileLoginBtn');
  const logoutBtn = document.getElementById('logoutBtn');
  const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');
  const closeModal = document.querySelector('.close-modal');
  const switchToSignup = document.getElementById('switchToSignup');
  const switchToLogin = document.getElementById('switchToLogin');
  const modalTitle = document.getElementById('modalTitle');
  const userInfo = document.getElementById('userInfo');
  const userName = document.getElementById('userName');
  const userAvatar = document.getElementById('userAvatar');
  const subscriptionStatus = document.getElementById('subscriptionStatus');
  const mobileUserInfo = document.getElementById('mobileUserInfo');
  const mobileUserName = document.getElementById('mobileUserName');
  const mobileUserAvatar = document.getElementById('mobileUserAvatar');
  const mobileSubscriptionStatus = document.getElementById('mobileSubscriptionStatus');
  const togglePasswordButtons = document.querySelectorAll('.toggle-password');
  const promoCodeForm = document.getElementById('promoCodeForm');
  const promoCodeInput = document.getElementById('promo-code');
  const getCodeBtn = document.getElementById('getCodeBtn');
  const promoCodeAlert = document.getElementById('promoCodeAlert');
  const authAlert = document.getElementById('authAlert');
  const heroButtons = document.getElementById('heroButtons');
  const couponContent = document.getElementById('couponContent');
  const subscriptionSuccess = document.getElementById('subscriptionSuccess');
  const usedPromoCode = document.getElementById('usedPromoCode');
  const subscriberName = document.getElementById('subscriberName');
  const remainingDaysCount = document.getElementById('remainingDaysCount');
  const cancelSubscriptionBtn = document.getElementById('cancelSubscriptionBtn');
  const subscriptionForm = document.getElementById('subscriptionForm');
  const closeForm = document.querySelector('.close-form');
  const subscriptionDetailsForm = document.getElementById('subscriptionDetailsForm');
  const subscriptionAlert = document.getElementById('subscriptionAlert');
  const cancelModal = document.getElementById('cancelModal');
  const cancelLoadingModal = document.getElementById('cancelLoadingModal');
  const confirmCancelBtn = document.getElementById('confirmCancelBtn');
  const cancelAlert = document.getElementById('cancelAlert');

  // نظام الاشتراك بالمدة الزمنية
  const subscriptionPlans = {
    "GEAR78STUD": { days: 30, description: "كود الطلاب - 30 يوم" },
    "YOUSEFGEAR55": { days: 60, description: "كود مميز - 60 يوم" },
    "IAMPRO8GE": { days: 90, description: "كود محترف - 90 يوم" }
  };

  // بيانات خطط الاشتراك
  const pricingPlans = [
    {
      id: "students",
      name: "الطلاب",
      price: "20",
      period: "30 يوم",
      features: [
        "الوصول الكامل إلى GPT-5 plus",
        "رسائل غير محدودة لمدة 30 يوم",
        "دعم 3 لغات برمجية",
        "تصدير المحادثات",
        "دعم فني عبر البريد الإلكتروني"
      ],
      notes: "يمكنك التراجع عن الاشتراك في أي وقت خلال 15 يوم المقبلة"
    },
    {
      id: "professional",
      name: "المحترف",
      price: "250",
      period: "6 شهور",
      features: [
        "تغيير بين نماذج gpt, cloudi, deepseek",
        "رسائل غير محدودة لمدة 6 شهور",
        "دعم 20+ لغة برمجية",
        "مزامنة عبر الأجهزة",
        "دعم فني أولوية 24/7",
        "تصدير المحادثات بصيغ متعددة"
      ],
      notes: "يمكن التراجع عن الاشتراك في أي وقت خلال ال3 شهور المقبلة"
    }
  ];

  // Array of random user avatar images
  const userAvatarImages = [
    'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=100&h=100&fit=crop',
    'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop',
    'https://images.unsplash.com/photo-1527980965255-d3b416303d12?w=100&h=100&fit=crop',
    'https://images.unsplash.com/photo-1580489944761-15a19d654956?w=100&h=100&fit=crop',
    'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop',
    'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop'
  ];

  // متغيرات النظام
  let currentPlan = null;
  let currentCardIndex = 0;
  let carouselIndex = 0;
  let isSubscribed = false;
  let userSubscriptionData = null;

  // Function to get a random avatar image
  function getRandomAvatar() {
    const randomIndex = Math.floor(Math.random() * userAvatarImages.length);
    return userAvatarImages[randomIndex];
  }

  // Show alert message
  function showAlert(element, message, type = 'success') {
    element.innerHTML = `
      <div class="alert alert-${type} animate__animated animate__fadeIn">
        <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-triangle'}"></i>
        ${message}
      </div>
    `;
    setTimeout(() => {
      element.innerHTML = '';
    }, 5000);
  }

  // Send email verification
  function sendEmailVerification() {
    const user = auth.currentUser;
    if (user) {
      user.sendEmailVerification()
      .then(() => {
        showAlert(authAlert, 'تم إرسال رابط التحقق إلى بريدك الإلكتروني. يرجى التحقق من بريدك.', 'success');
      })
      .catch((error) => {
        console.error('Error sending verification email:', error);
        showAlert(authAlert, 'حدث خطأ في إرسال بريد التحقق', 'error');
      });
    }
  }

  // Check email verification status
  function checkEmailVerification() {
    const user = auth.currentUser;
    if (user) {
      user.reload().then(() => {
        if (user.emailVerified) {
          db.collection('users').doc(user.uid).update({
            emailVerified: true,
            emailVerifiedAt: firebase.firestore.FieldValue.serverTimestamp()
          });
        }
      });
    }
  }

  // حساب الأيام المتبقية في الاشتراك
  function calculateRemainingDays(subscriptionExpiry) {
    if (!subscriptionExpiry) return 0;
    
    const now = new Date();
    const expiry = subscriptionExpiry.toDate();
    const diffTime = expiry - now;
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    return Math.max(0, diffDays);
  }

  // تحديث حالة الاشتراك
  function updateSubscriptionStatus(userData) {
    const remainingDays = calculateRemainingDays(userData.subscriptionExpiry);
    const statusElement = subscriptionStatus;
    const mobileStatusElement = mobileSubscriptionStatus;
    
    let statusText = '';
    let statusClass = '';
    
    if (remainingDays > 0) {
      statusText = `${remainingDays} يوم متبقي`;
      statusClass = 'subscription-status';
      
      if (remainingDays <= 7) {
        statusClass += ' warning';
      }
      
      isSubscribed = true;
      userSubscriptionData = userData;
    } else {
      statusText = 'انتهى الاشتراك';
      statusClass = 'subscription-status expired';
      isSubscribed = false;
      userSubscriptionData = null;
    }
    
    statusElement.textContent = statusText;
    statusElement.className = statusClass;
    mobileStatusElement.textContent = statusText;
    mobileStatusElement.className = statusClass;
    
    return remainingDays > 0;
  }

  // Toggle password visibility
  togglePasswordButtons.forEach(button => {
    button.addEventListener('click', function() {
      const input = this.parentElement.querySelector('input');
      const icon = this.querySelector('i');
      
      if (input.type === 'password') {
        input.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
      } else {
        input.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
      }
    });
  });

  // Switch between login and signup forms
  switchToSignup.addEventListener('click', function() {
    loginForm.style.display = 'none';
    signupForm.style.display = 'block';
    modalTitle.textContent = 'إنشاء حساب جديد';
  });

  switchToLogin.addEventListener('click', function() {
    signupForm.style.display = 'none';
    loginForm.style.display = 'block';
    modalTitle.textContent = 'تسجيل الدخول';
  });

  // Open modal
  function openAuthModal() {
    authModal.classList.add('active');
    document.body.style.overflow = 'hidden';
    signupForm.style.display = 'block';
    loginForm.style.display = 'none';
    modalTitle.textContent = 'إنشاء حساب جديد';
  }

  // Close modal
  function closeAuthModal() {
    authModal.classList.remove('active');
    document.body.style.overflow = '';
    loginForm.reset();
    signupForm.reset();
    signupForm.style.display = 'block';
    loginForm.style.display = 'none';
    modalTitle.textContent = 'إنشاء حساب جديد';
    authAlert.innerHTML = '';
  }

  // Event listeners for modal
  loginBtn.addEventListener('click', openAuthModal);
  mobileLoginBtn.addEventListener('click', openAuthModal);
  closeModal.addEventListener('click', closeAuthModal);

  // Close modal when clicking outside
  window.addEventListener('click', function(event) {
    if (event.target === authModal) {
      closeAuthModal();
    }
  });

  // Sign up function
  signupForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const username = document.getElementById('signupUsername').value;
    const email = document.getElementById('signupEmail').value;
    const password = document.getElementById('signupPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    
    if (password !== confirmPassword) {
      showAlert(authAlert, 'كلمات المرور غير متطابقة', 'error');
      return;
    }
    
    if (password.length < 6) {
      showAlert(authAlert, 'كلمة المرور يجب أن تكون 6 أحرف على الأقل', 'error');
      return;
    }
    
    auth.createUserWithEmailAndPassword(email, password)
      .then((userCredential) => {
        const user = userCredential.user;
        
        return user.updateProfile({
          displayName: username
        });
      })
      .then(() => {
        const user = auth.currentUser;
        const randomAvatar = getRandomAvatar();
        
        const subscriptionExpiry = new Date();
        subscriptionExpiry.setDate(subscriptionExpiry.getDate() + 30);
        
        return db.collection('users').doc(user.uid).set({
          username: username,
          email: email,
          emailVerified: false,
          premium: false,
          subscriptionActive: true,
          subscriptionExpiry: firebase.firestore.Timestamp.fromDate(subscriptionExpiry),
          subscriptionStarted: firebase.firestore.FieldValue.serverTimestamp(),
          avatar: randomAvatar,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
      })
      .then(() => {
        sendEmailVerification();
        closeAuthModal();
        updateUserUI();
        showAlert(authAlert, 'تم إنشاء الحساب بنجاح! تم إرسال رابط التحقق إلى بريدك الإلكتروني. لديك الآن 30 يوم مجانية.', 'success');
      })
      .catch((error) => {
        const errorMessage = error.message;
        showAlert(authAlert, `خطأ في إنشاء الحساب: ${errorMessage}`, 'error');
      });
  });

  // Login function
  loginForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    
    auth.signInWithEmailAndPassword(email, password)
      .then((userCredential) => {
        closeAuthModal();
        updateUserUI();
        checkEmailVerification();
      })
      .catch((error) => {
        const errorMessage = error.message;
        showAlert(authAlert, `خطأ في تسجيل الدخول: ${errorMessage}`, 'error');
      });
  });

  // Logout function
  logoutBtn.addEventListener('click', function(e) {
    e.preventDefault();
    if (confirm('هل أنت متأكد من تسجيل الخروج؟')) {
      auth.signOut().then(() => {
        updateUserUI();
      });
    }
  });

  mobileLogoutBtn.addEventListener('click', function(e) {
    e.preventDefault();
    if (confirm('هل أنت متأكد من تسجيل الخروج؟')) {
      auth.signOut().then(() => {
        updateUserUI();
      });
    }
  });

  // Update Hero Buttons
  function updateHeroButtons(user) {
    heroButtons.innerHTML = '';
    
    if (!user) {
      // المستخدم غير مسجل
      heroButtons.innerHTML = `
        <button class="btn btn-primary" id="heroSignupBtn">
          <i class="fas fa-user-plus"></i> إنشاء حساب
        </button>
        <button class="btn" style="background: rgba(255, 255, 255, 0.2); color: white;" id="heroLoginBtn">
          <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
        </button>
      `;
      
      document.getElementById('heroSignupBtn').addEventListener('click', openAuthModal);
      document.getElementById('heroLoginBtn').addEventListener('click', () => {
        openAuthModal();
        switchToLogin.click();
      });
    } else {
      // المستخدم مسجل
      if (isSubscribed) {
        heroButtons.innerHTML = `
          <a href="gear.html" class="btn btn-primary">
            <i class="fas fa-comments"></i> ابدأ المحادثة الآن
          </a>
          <button class="btn" style="background: rgba(255, 255, 255, 0.2); color: white;" disabled>
            <i class="fas fa-check-circle"></i> تم الاشتراك
          </button>
        `;
      } else {
        heroButtons.innerHTML = `
          <a href="gear.html" class="btn btn-primary">
            <i class="fas fa-comments"></i> ابدأ المحادثة الآن
          </a>
          <a href="#pricing" class="btn" style="background: rgba(255, 255, 255, 0.2); color: white;">
            <i class="fas fa-tags"></i> عرض الاشتراكات
          </a>
        `;
      }
    }
  }

  // Update Coupon Section
  function updateCouponSection(user, userData) {
    if (isSubscribed && userSubscriptionData) {
      couponContent.style.display = 'none';
      subscriptionSuccess.style.display = 'block';
      
      usedPromoCode.textContent = userSubscriptionData.promoCodeUsed || 'كود مجاني';
      subscriberName.textContent = user.displayName || user.email.split('@')[0];
      remainingDaysCount.textContent = calculateRemainingDays(userSubscriptionData.subscriptionExpiry);
    } else {
      couponContent.style.display = 'block';
      subscriptionSuccess.style.display = 'none';
    }
  }

  // Initialize Cards Stack
  function initCardsStack() {
    const cards = document.querySelectorAll('.gear-card');
    const indicators = document.querySelectorAll('.indicator');
    
    function updateCards() {
      cards.forEach((card, index) => {
        card.classList.remove('active', 'previous', 'next');
        
        if (index === currentCardIndex) {
          card.classList.add('active');
        } else if (index === (currentCardIndex - 1 + cards.length) % cards.length) {
          card.classList.add('previous');
        } else if (index === (currentCardIndex + 1) % cards.length) {
          card.classList.add('next');
        }
      });
      
      indicators.forEach((indicator, index) => {
        indicator.classList.toggle('active', index === currentCardIndex);
      });
    }
    
    indicators.forEach((indicator, index) => {
      indicator.addEventListener('click', () => {
        currentCardIndex = index;
        updateCards();
      });
    });
    
    // Auto rotate cards
    setInterval(() => {
      currentCardIndex = (currentCardIndex + 1) % cards.length;
      updateCards();
    }, 5000);
    
    updateCards();
  }

  // Initialize Pricing Carousel
  function initPricingCarousel() {
    const carouselContainer = document.getElementById('carouselContainer');
    const carouselNav = document.getElementById('carouselNav');
    
    pricingPlans.forEach((plan, index) => {
      // إنشاء الكارت
      const card = document.createElement('div');
      card.className = 'ios-card';
      card.setAttribute('data-plan', plan.id);
      
      let featuresHTML = '';
      plan.features.forEach(feature => {
        featuresHTML += `
          <li>
            <i class="fas fa-check-circle"></i>
            ${feature}
          </li>
        `;
      });
      
      card.innerHTML = `
        <div class="card-header">
          <h2 class="plan-name">${plan.name}</h2>
          <div class="plan-price">${plan.price} <span>جنيه</span></div>
          <p style="color: #666; font-size: 1.1rem;">${plan.period}</p>
        </div>
        <ul class="features-list">
          ${featuresHTML}
        </ul>
        <button class="btn btn-primary btn-block subscribe-carousel-btn" 
                data-plan='${JSON.stringify(plan)}'>
          <i class="fas fa-shopping-cart"></i> اشترك الآن
        </button>
      `;
      
      carouselContainer.appendChild(card);
      
      // إنشاء نقطة التنقل
      const navDot = document.createElement('div');
      navDot.className = `nav-dot ${index === 0 ? 'active' : ''}`;
      navDot.setAttribute('data-index', index);
      carouselNav.appendChild(navDot);
    });
    
    // إضافة أحداث التنقل
    const navDots = document.querySelectorAll('.nav-dot');
    const carouselCards = document.querySelectorAll('.ios-card');
    
    navDots.forEach(dot => {
      dot.addEventListener('click', () => {
        const index = parseInt(dot.getAttribute('data-index'));
        carouselIndex = index;
        
        carouselContainer.style.transform = `translateX(-${index * 100}%)`;
        
        navDots.forEach(d => d.classList.remove('active'));
        dot.classList.add('active');
      });
    });
    
    // إضافة أحداث السحب للتاتش
    let startX = 0;
    let isDragging = false;
    
    carouselContainer.addEventListener('touchstart', (e) => {
      startX = e.touches[0].clientX;
      isDragging = true;
    });
    
    carouselContainer.addEventListener('touchmove', (e) => {
      if (!isDragging) return;
      e.preventDefault();
    });
    
    carouselContainer.addEventListener('touchend', (e) => {
      if (!isDragging) return;
      
      const endX = e.changedTouches[0].clientX;
      const diffX = startX - endX;
      
      if (Math.abs(diffX) > 50) {
        if (diffX > 0 && carouselIndex < pricingPlans.length - 1) {
          carouselIndex++;
        } else if (diffX < 0 && carouselIndex > 0) {
          carouselIndex--;
        }
        
        carouselContainer.style.transform = `translateX(-${carouselIndex * 100}%)`;
        
        navDots.forEach(d => d.classList.remove('active'));
        navDots[carouselIndex].classList.add('active');
      }
      
      isDragging = false;
    });
    
    // إضافة أحداث أزرار الاشتراك
    document.querySelectorAll('.subscribe-carousel-btn').forEach(btn => {
      btn.addEventListener('click', function(e) {
        e.preventDefault();
        
        const user = auth.currentUser;
        if (!user) {
          openAuthModal();
          return;
        }
        
        const planData = JSON.parse(this.getAttribute('data-plan'));
        openSubscriptionForm(planData);
      });
    });
  }

  // Open Subscription Form
  function openSubscriptionForm(plan) {
    currentPlan = plan;
    
    document.getElementById('subscriptionPlanName').textContent = `اشتراك ${plan.name}`;
    document.getElementById('subscriptionPrice').textContent = `${plan.price} جنيه`;
    document.getElementById('subscriptionNotes').textContent = plan.notes;
    
    const user = auth.currentUser;
    if (user) {
      document.getElementById('subscriptionName').value = user.displayName || '';
    }
    
    subscriptionForm.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  // Close Subscription Form
  function closeSubscriptionForm() {
    subscriptionForm.classList.remove('active');
    document.body.style.overflow = '';
    subscriptionAlert.innerHTML = '';
    currentPlan = null;
  }

  // Initialize Subscription Form
  function initSubscriptionForm() {
    closeForm.addEventListener('click', closeSubscriptionForm);
    
    subscriptionDetailsForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const user = auth.currentUser;
      if (!user) {
        showAlert(subscriptionAlert, 'يجب تسجيل الدخول أولاً', 'error');
        return;
      }
      
      const phone = document.getElementById('subscriptionPhone').value;
      const name = document.getElementById('subscriptionName').value;
      
      if (!phone || !name) {
        showAlert(subscriptionAlert, 'يرجى ملء جميع الحقول', 'error');
        return;
      }
      
      // إنشاء رسالة الواتساب
      const message = `أريد الاشتراك في خطة ${currentPlan.name} من GEAR AI\n\n` +
                     `الاسم: ${name}\n` +
                     `رقم الهاتف: ${phone}\n` +
                     `السعر: ${currentPlan.price} جنيه\n` +
                     `المدة: ${currentPlan.period}\n\n` +
                     `ملاحظة: ${currentPlan.notes}`;
      
      const encodedMessage = encodeURIComponent(message);
      const whatsappURL = `https://wa.me/201148179176?text=${encodedMessage}`;
      
      // حفظ بيانات الاشتراك
      db.collection('subscriptions').add({
        userId: user.uid,
        userName: name,
        userEmail: user.email,
        phone: phone,
        plan: currentPlan.name,
        price: currentPlan.price,
        period: currentPlan.period,
        status: 'pending',
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        closeSubscriptionForm();
        window.open(whatsappURL, '_blank');
        showAlert(promoCodeAlert, 'تم حفظ طلب اشتراكك بنجاح! سيتم التواصل معك عبر واتساب.', 'success');
      }).catch(error => {
        showAlert(subscriptionAlert, 'حدث خطأ في حفظ البيانات', 'error');
      });
    });
  }

  // Cancel Subscription
  function initCancelSubscription() {
    cancelSubscriptionBtn.addEventListener('click', function() {
      const user = auth.currentUser;
      if (!user) return;
      
      document.getElementById('cancelPlanType').textContent = userSubscriptionData?.promoCodeUsed || 'كود مجاني';
      document.getElementById('cancelUserName').textContent = user.displayName || user.email.split('@')[0];
      document.getElementById('cancelRemainingDays').textContent = calculateRemainingDays(userSubscriptionData?.subscriptionExpiry) || 0;
      
      cancelModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    });
    
    // Confirm Cancel
    confirmCancelBtn.addEventListener('click', function() {
      const user = auth.currentUser;
      if (!user) return;
      
      cancelModal.classList.remove('active');
      cancelLoadingModal.classList.add('active');
      
      // محاكاة عملية التحقق
      setTimeout(() => {
        cancelLoadingModal.classList.remove('active');
        
        // إنشاء رسالة الواتساب للإلغاء
        const message = `أريد إلغاء اشتراكي الحالي في GEAR AI\n\n` +
                       `اسم المستخدم: ${user.displayName || user.email.split('@')[0]}\n` +
                       `البريد الإلكتروني: ${user.email}\n` +
                       `كود الاشتراك: ${userSubscriptionData?.promoCodeUsed || 'كود مجاني'}\n` +
                       `نوع الاشتراك: ${document.getElementById('cancelPlanType').textContent}\n` +
                       `الأيام المتبقية: ${document.getElementById('cancelRemainingDays').textContent} يوم`;
        
        const encodedMessage = encodeURIComponent(message);
        const whatsappURL = `https://wa.me/201148179176?text=${encodedMessage}`;
        
        // تحديث حالة الاشتراك في قاعدة البيانات
        db.collection('users').doc(user.uid).update({
          subscriptionActive: false,
          subscriptionCancelled: true,
          subscriptionCancelledAt: firebase.firestore.FieldValue.serverTimestamp()
        }).then(() => {
          window.open(whatsappURL, '_blank');
          
          // إعادة تحميل بيانات المستخدم
          updateUserUI();
          
          showAlert(promoCodeAlert, 'تم تقديم طلب إلغاء الاشتراك بنجاح! سيتم التواصل معك عبر واتساب.', 'success');
        }).catch(error => {
          showAlert(cancelAlert, 'حدث خطأ في إلغاء الاشتراك', 'error');
        });
      }, 6800); // 6.8 ثانية
    });
  }

  // Promo code functionality
  promoCodeForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const user = auth.currentUser;
    if (!user) {
      showAlert(promoCodeAlert, 'يجب تسجيل الدخول أولاً لتفعيل كود الاشتراك', 'error');
      openAuthModal();
      return;
    }
    
    const promoCode = promoCodeInput.value.trim().toUpperCase();
    
    if (!promoCode) {
      showAlert(promoCodeAlert, 'يرجى إدخال كود الاشتراك', 'error');
      return;
    }
    
    if (subscriptionPlans[promoCode]) {
      const promoDetails = subscriptionPlans[promoCode];
      
      db.collection('usedPromoCodes').doc(`${user.uid}_${promoCode}`).get()
        .then((doc) => {
          if (doc.exists) {
            showAlert(promoCodeAlert, 'لقد استخدمت هذا الكود من قبل. كل كود يمكن استخدامه مرة واحدة فقط.', 'error');
            return;
          }
          
          const userRef = db.collection('users').doc(user.uid);
          
          userRef.get().then((doc) => {
            if (doc.exists) {
              const userData = doc.data();
              
              let newExpiryDate;
              if (userData.subscriptionExpiry) {
                const currentExpiry = userData.subscriptionExpiry.toDate();
                newExpiryDate = new Date(currentExpiry);
                newExpiryDate.setDate(newExpiryDate.getDate() + promoDetails.days);
              } else {
                newExpiryDate = new Date();
                newExpiryDate.setDate(newExpiryDate.getDate() + promoDetails.days);
              }
              
              const updateData = {
                subscriptionActive: true,
                subscriptionExpiry: firebase.firestore.Timestamp.fromDate(newExpiryDate),
                promoCodeUsed: promoCode,
                promoCodeUsedAt: firebase.firestore.FieldValue.serverTimestamp()
              };
              
              userRef.update(updateData)
                .then(() => {
                  return db.collection('usedPromoCodes').doc(`${user.uid}_${promoCode}`).set({
                    userId: user.uid,
                    promoCode: promoCode,
                    usedAt: firebase.firestore.FieldValue.serverTimestamp()
                  });
                })
                .then(() => {
                  const remainingDays = calculateRemainingDays(firebase.firestore.Timestamp.fromDate(newExpiryDate));
                  showAlert(promoCodeAlert, `🎉 تم تفعيل كود الاشتراك بنجاح! ${promoDetails.description} - اشتراكك ساري لمدة ${remainingDays} يوم`, 'success');
                  promoCodeInput.value = '';
                  updateUserUI();
                })
                .catch((error) => {
                  showAlert(promoCodeAlert, 'حدث خطأ أثناء تفعيل الكود. يرجى المحاولة مرة أخرى.', 'error');
                });
            }
          });
        })
        .catch((error) => {
          showAlert(promoCodeAlert, 'حدث خطأ أثناء التحقق من الكود. يرجى المحاولة مرة أخرى.', 'error');
        });
    } else {
      showAlert(promoCodeAlert, 'كود الاشتراك غير صحيح. يرجى التحقق والمحاولة مرة أخرى.', 'error');
    }
  });

  // Get code button - redirect to pricing section
  getCodeBtn.addEventListener('click', function() {
    document.getElementById('pricing').scrollIntoView({
      behavior: 'smooth'
    });
  });

  // Update UI based on authentication state
  function updateUserUI() {
    const user = auth.currentUser;
    
    if (user) {
      const displayName = user.displayName || user.email.split('@')[0];
      
      db.collection('users').doc(user.uid).get()
        .then((doc) => {
          if (doc.exists) {
            const userData = doc.data();
            
            userName.textContent = displayName;
            mobileUserName.textContent = displayName;
            
            if (userData.avatar) {
              userAvatar.style.backgroundImage = `url(${userData.avatar})`;
              userAvatar.textContent = '';
              mobileUserAvatar.style.backgroundImage = `url(${userData.avatar})`;
              mobileUserAvatar.textContent = '';
            } else {
              const randomAvatar = getRandomAvatar();
              userAvatar.style.backgroundImage = `url(${randomAvatar})`;
              userAvatar.textContent = '';
              mobileUserAvatar.style.backgroundImage = `url(${randomAvatar})`;
              mobileUserAvatar.textContent = '';
              
              db.collection('users').doc(user.uid).update({
                avatar: randomAvatar
              });
            }
            
            const isSubscriptionActive = updateSubscriptionStatus(userData);
            
            if (userData.premium) {
              userAvatar.classList.add('premium');
              mobileUserAvatar.classList.add('premium');
            } else {
              userAvatar.classList.remove('premium');
              mobileUserAvatar.classList.remove('premium');
            }
            
            userInfo.classList.add('active');
            loginBtn.style.display = 'none';
            
            mobileUserInfo.style.display = 'block';
            mobileLoginBtn.style.display = 'none';
            
            // تحديث الأقسام الأخرى
            updateHeroButtons(user);
            updateCouponSection(user, userData);
          }
        })
        .catch((error) => {
          console.error("Error getting user document:", error);
        });
    } else {
      userInfo.classList.remove('active');
      loginBtn.style.display = 'block';
      
      mobileUserInfo.style.display = 'none';
      mobileLoginBtn.style.display = 'block';
      
      updateHeroButtons(null);
      updateCouponSection(null, null);
    }
  }

  // Initialize subscription system
  function initializeSubscriptionSystem() {
    const promoCodeRef = db.collection('promoCodes');
    
    Object.keys(subscriptionPlans).forEach(code => {
      promoCodeRef.doc(code).get().then((doc) => {
        if (!doc.exists) {
          promoCodeRef.doc(code).set({
            code: code,
            days: subscriptionPlans[code].days,
            description: subscriptionPlans[code].description,
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          });
        }
      });
    });
  }

  // Scroll Animation System
  function initScrollAnimations() {
    const animatedElements = document.querySelectorAll('.scroll-animate, .scroll-animate-left, .scroll-animate-right, .scroll-animate-scale');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('show');
        }
      });
    }, {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });

    animatedElements.forEach(element => {
      observer.observe(element);
    });
  }

  // Mobile Menu Toggle
  function initMobileMenu() {
    const hamburgerButton = document.querySelector('.hamburger-button');
    const mobileMenu = document.querySelector('.mobile-menu');

    if (hamburgerButton && mobileMenu) {
      hamburgerButton.addEventListener('click', () => {
        hamburgerButton.classList.toggle('active');
        mobileMenu.classList.toggle('active');
        document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
      });

      const mobileLinks = mobileMenu.querySelectorAll('a');
      mobileLinks.forEach(link => {
        link.addEventListener('click', () => {
          hamburgerButton.classList.remove('active');
          mobileMenu.classList.remove('active');
          document.body.style.overflow = '';
        });
      });
    }
  }

  // Navbar Scroll Effect
  function initNavbarScroll() {
    const navbar = document.querySelector('.navbar');
    
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        navbar.classList.add('scrolled');
      } else {
        navbar.classList.remove('scrolled');
      }
    });
  }

  // Smooth scrolling for anchor links
  function initSmoothScroll() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        
        const targetId = this.getAttribute('href');
        if (targetId === '#') return;
        
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          targetElement.scrollIntoView({
            behavior: 'smooth'
          });
          
          const mobileMenu = document.querySelector('.mobile-menu');
          const hamburgerButton = document.querySelector('.hamburger-button');
          if (mobileMenu.classList.contains('active')) {
            mobileMenu.classList.remove('active');
            hamburgerButton.classList.remove('active');
            document.body.style.overflow = '';
          }
        }
      });
    });
  }

  // Initialize everything when DOM is loaded
  document.addEventListener('DOMContentLoaded', function() {
    initScrollAnimations();
    initMobileMenu();
    initNavbarScroll();
    initSmoothScroll();
    initCardsStack();
    initPricingCarousel();
    initSubscriptionForm();
    initCancelSubscription();
    
    // Check auth state on page load
    auth.onAuthStateChanged((user) => {
      updateUserUI();
      if (user) {
        checkEmailVerification();
      }
      initializeSubscriptionSystem();
    });
  });

  // Handle window resize
  window.addEventListener('resize', function() {
    if (window.innerWidth > 768) {
      const mobileMenu = document.querySelector('.mobile-menu');
      const hamburgerButton = document.querySelector('.hamburger-button');
      if (mobileMenu && mobileMenu.classList.contains('active')) {
        mobileMenu.classList.remove('active');
        hamburgerButton.classList.remove('active');
        document.body.style.overflow = '';
      }
    }
  });
</script>
