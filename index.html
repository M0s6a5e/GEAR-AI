<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GEAR AI - الذكاء الاصطناعي المتطور</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />


    <!-- الكلمات المفتاحية المخصصة لـ GEAR AI -->
<meta name="keywords" content="GEAR AI, ذكاء اصطناعي, الذكاء الاصطناعي, AI, Artificial Intelligence, روبوت محادثة, chatbot, تعلم آلة, machine learning, معالجة اللغة الطبيعية, NLP, حلول ذكية, أتمتة, innovation, innovation, future technology, GPT, مساعد ذكي">

<!-- وصف الموقع -->
<meta name="description" content="GEAR AI - مساعدك الذكي المتقدم. استفد من أحدث تقنيات الذكاء الاصطناعي للمحادثة، توليد النصوص، حل المشكلات، والإبداع. جرب قوة المستقبل اليوم.">

<!-- Open Graph Tags للشكل الاحترافي على وسائل التواصل -->
<meta property="og:title" content="GEAR AI | مساعدك الذكي المتقدم للذكاء الاصطناعي">
<meta property="og:description" content="تجربة الثورة الصناعية الرابعة مع GEAR AI. محادثات ذكية، توليد نصوص مبدعة، وحلول ذكية لجميع استفساراتك.">
<meta property="og:image" content="websima.png">
<meta property="og:url" content="https://yourwebsite.com">
<meta property="og:type" content="website">
<meta property="og:site_name" content="GEAR AI">

<!-- Twitter Card Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="GEAR AI | مساعدك الذكي المتقدم للذكاء الاصطناعي">
<meta name="twitter:description" content="تجربة الثورة الصناعية الرابعة مع GEAR AI. محادثات ذكية، توليد نصوص مبدعة، وحلول ذكية.">
<meta name="twitter:image" content="https://yourwebsite.com/images/gear-ai-og-image.jpg">

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      :root {
        --primary-color: #4891ff;
        --gold-color: #FFD700;
        --light-color: #f4f4f6;
        --dark-color: #111;
        --success-color: #10B981;
        --warning-color: #F59E0B;
        --danger-color: #EF4444;
      }

      body {
        font-family: 'Poppins', sans-serif;
        font-size: 16px;
        line-height: 1.5;
        background: #fff;
        overflow-x: hidden;
      }

      a {
        text-decoration: none;
        color: #333;
      }

      ul {
        list-style: none;
      }

      img {
        max-width: 100%;
      }

      /* Navbar */
      .navbar {
        background: #fff;
        padding: 20px;
        position: fixed;
        width: 100%;
        top: 0;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }

      .navbar .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .navbar .main-menu ul {
        display: flex;
      }

      .navbar ul li a {
        padding: 10px 20px;
        display: block;
        font-weight: 600;
        transition: 0.5s;
      }

      .navbar ul li a:hover {
        color: var(--primary-color);
      }

      .navbar ul li a i {
        margin-left: 10px;
      }

      .navbar ul li:last-child a {
        margin-right: 10px;
      }

      /* Hero Section with Video Background */
      .hero {
        position: relative;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        text-align: center;
        overflow: hidden;
        margin-bottom: 0;
        margin-top: 80px;
      }

      .hero-video {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
      }

      .hero::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: -1;
      }

      .hero-content {
        z-index: 1;
        max-width: 800px;
        padding: 0 20px;
      }

      .hero-heading {
        font-size: 3.5rem;
        margin-bottom: 20px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      }

      .hero-text {
        font-size: 1.2rem;
        margin-bottom: 30px;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
      }

      /* Video Section */
      .video-section {
        position: relative;
        padding: 80px 0;
        overflow: hidden;
      }

      .video-section-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
      }

      .video-section::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.85);
        z-index: -1;
      }

      .video-section-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        position: relative;
        z-index: 1;
      }

      .video-section-heading {
        margin-bottom: 40px;
        max-width: 700px;
      }

      .promo-code-container {
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        max-width: 500px;
        width: 100%;
        margin-top: 30px;
      }

      .promo-code-form {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .promo-code-input {
        padding: 15px;
        border: 2px solid #ddd;
        border-radius: 10px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      .promo-code-input:focus {
        border-color: var(--primary-color);
        outline: none;
      }

      .get-code-btn {
        background: transparent;
        border: 2px solid var(--primary-color);
        color: var(--primary-color);
        padding: 10px 20px;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 15px;
      }

      .get-code-btn:hover {
        background: var(--primary-color);
        color: white;
      }

      /* Testimonials */
      .testimonials {
        position: relative;
        padding: 80px 0;
        overflow: hidden;
      }

      .testimonials-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
      }

      .testimonials::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(244, 244, 246, 0.85);
        z-index: -1;
      }

      .testimonials .container {
        position: relative;
        z-index: 1;
      }

      .testimonials .testimonials-heading {
        width: 700px;
        margin-bottom: 40px;
      }

      .testimonials .testimonials-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 30px;
      }

      .testimonials .card p:nth-child(2) {
        margin-top: 30px;
        font-weight: bold;
      }

      /* Pricing */
      .pricing {
        position: relative;
        padding: 80px 0;
        overflow: hidden;
      }

      .pricing-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
      }

      .pricing::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.9);
        z-index: -1;
      }

      .pricing .container-sm {
        position: relative;
        z-index: 1;
      }

      .pricing .pricing-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 30px;
        margin-top: 50px;
      }

      .pricing .pricing-card-subheading {
        margin-bottom: 30px;
      }

      .pricing .pricing-card-price {
        margin-bottom: 30px;
        padding: 20px 0;
        border-bottom: 1px solid #ccc;
      }

      .pricing ul {
        margin: 30px 0;
      }

      .pricing ul li {
        margin-bottom: 20px;
      }

      .pricing ul li i {
        margin-left: 10px;
      }

      .pricing .pricing-footer {
        margin: 30px 0;
      }

      /* Improved Pricing Cards */
      .pricing-card {
        transition: all 0.3s ease;
        border-radius: 15px;
        overflow: hidden;
        position: relative;
      }

      .pricing-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.15);
      }

      .pricing-card-header {
        padding: 30px 30px 20px;
        text-align: center;
        position: relative;
      }

      .pricing-card-body {
        padding: 0 30px 30px;
      }

      .pricing-card-popular {
        position: absolute;
        top: 20px;
        left: 20px;
        background: var(--gold-color);
        color: #333;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      }

      .pricing-card-price {
        font-size: 2.5rem;
        font-weight: bold;
        margin: 20px 0;
        color: var(--dark-color);
      }

      .pricing-card-period {
        font-size: 1rem;
        color: #666;
      }

      .pricing-features {
        list-style: none;
        padding: 0;
        margin: 20px 0;
      }

      .pricing-features li {
        padding: 10px 0;
        border-bottom: 1px solid #eee;
        display: flex;
        align-items: center;
      }

      .pricing-features li:last-child {
        border-bottom: none;
      }

      .pricing-features i {
        margin-left: 10px;
        color: var(--primary-color);
      }

      .pricing-card-premium {
        border: 2px solid var(--gold-color);
        box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
      }

      .pricing-card-premium .pricing-card-header {
        background: linear-gradient(135deg, #FFD700, #FFA500);
        color: #333;
      }

      /* FAQ */
      .faq {
        position: relative;
        padding: 80px 0;
        overflow: hidden;
      }

      .faq-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: -1;
      }

      .faq::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(244, 244, 246, 0.85);
        z-index: -1;
      }

      .faq .container-sm {
        position: relative;
        z-index: 1;
      }

      .faq .faq-group {
        border-bottom: 1px solid #ccc;
        padding-bottom: 20px;
      }

      .faq .faq-group .faq-group-header {
        padding: 20px 0;
        margin-bottom: 15px;
        position: relative;
      }

      .faq .faq-group .faq-group-header h4 {
        font-weight: 600;
        width: 95%;
      }

      .faq .faq-group .faq-group-header i {
        position: absolute;
        left: 0;
        top: 35px;
        font-size: 1.3rem;
        cursor: pointer;
      }

      .faq .faq-group .faq-group-body {
        display: none;
      }

      .faq .faq-group .faq-group-body.open {
        display: block;
      }

      .faq ul.faq-menu {
        max-width: 400px;
        margin: auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #ddd;
        padding: 10px 20px;
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
      }

      .faq ul.faq-menu li {
        padding: 10px 20px;
        border-radius: 5px;
        text-align: center;
      }

      .faq ul.faq-menu li.active {
        background: var(--primary-color);
        color: #fff;
      }

      /* Footer */
      .footer {
        padding: 60px 0 30px;
      }

      .footer h4 {
        margin-bottom: 10px;
      }

      .footer ul li {
        line-height: 2.5;
      }

      .footer a {
        color: #ccc;
      }

      .footer i {
        font-size: 1.5rem;
        margin-left: 10px;
      }

      .footer-grid {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr;
        gap: 30px;
        justify-content: center;
        align-items: center;
      }

      .footer .card {
        margin: 20px 0 30px 30px;
      }

      .footer input[type='email'] {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        margin: 20px 0;
      }

      /* Utility Classes */
      .container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 0 15px;
      }

      .container-sm {
        max-width: 800px;
        margin: 0 auto;
        padding: 0 15px;
      }

      /* Card */
      .card {
        background: #fff;
        color: #000;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      }

      /* Buttons */
      .btn {
        display: inline-block;
        padding: 13px 20px;
        background: var(--light-color);
        color: #333;
        font-weight: 600;
        text-decoration: none;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        text-align: center;
        transition: 0.5s;
      }

      .btn:hover {
        opacity: 0.8;
        transform: translateY(-2px);
      }

      .btn-primary {
        background: var(--primary-color);
        color: #fff;
      }

      .btn-gold {
        background: var(--gold-color);
        color: #333;
        font-weight: bold;
      }

      .btn-dark {
        background: var(--dark-color);
        color: #fff;
      }

      .btn-block {
        display: block;
        width: 100%;
      }

      /* Text Classes */
      .text-xxl {
        font-size: 3rem;
        line-height: 1.2;
        font-weight: 600;
        margin: 40px 0 20px;
      }

      .text-xl {
        font-size: 2.2rem;
        line-height: 1.4;
        font-weight: normal;
        margin: 40px 0 20px;
      }

      .text-lg {
        font-size: 1.8rem;
        line-height: 1.4;
        font-weight: normal;
        margin: 30px 0 20px;
      }

      .text-md {
        font-size: 1.2rem;
        line-height: 1.4;
        font-weight: normal;
        margin: 20px 0 10px;
      }

      .text-sm {
        font-size: 0.9rem;
        line-height: 1.4;
        font-weight: normal;
        margin: 10px 0 5px;
      }

      .text-center {
        text-align: center;
      }

      /* Background */
      .bg-primary {
        background: var(--primary-color);
        color: #fff;
      }

      .bg-light {
        background: var(--light-color);
        color: #333;
      }

      .bg-dark {
        background: var(--dark-color);
        color: #fff;
      }

      .bg-black {
        background: #000;
        color: #fff;
      }

      /* Hamburger Button */
      .hamburger-button {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: 10px;
        z-index: 1000;
      }

      .hamburger-button .hamburger-line {
        width: 30px;
        height: 3px;
        background: #333;
        margin: 6px 0;
      }

      /* Mobile Menu */
      .mobile-menu {
        position: fixed;
        top: 0;
        left: -300px;
        width: 250px;
        height: 100%;
        z-index: 100;
        background: #fff;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
        transition: left 0.3s ease-in-out;
      }

      .mobile-menu.active {
        left: 0;
      }

      .mobile-menu ul {
        margin-top: 100px;
        padding-left: 10px;
      }

      .mobile-menu ul li {
        margin: 10px 0;
      }

      .mobile-menu ul li a {
        font-size: 20px;
        transition: 0.3s;
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
      }

      .modal.active {
        display: flex;
      }

      .modal-content {
        background-color: #fff;
        padding: 30px;
        border-radius: 10px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .modal-header h2 {
        margin: 0;
      }

      .close-modal {
        background: none;
        border: none;
        font-size: 24px;
        cursor: pointer;
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
      }

      .form-group input {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 16px;
      }

      .password-input {
        position: relative;
      }

      .toggle-password {
        position: absolute;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        cursor: pointer;
        color: #666;
      }

      .form-footer {
        margin-top: 20px;
        text-align: center;
      }

      .form-footer a {
        color: var(--primary-color);
        cursor: pointer;
      }

      /* User Info */
      .user-info {
        display: none;
        align-items: center;
      }

      .user-info.active {
        display: flex;
      }

      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: var(--primary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-left: 10px;
        font-weight: bold;
        position: relative;
        transition: all 0.3s;
        overflow: hidden;
        background-size: cover;
        background-position: center;
      }

      .user-avatar.premium {
        background: linear-gradient(45deg, #FFD700, #FFA500);
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
      }

      .user-avatar.verified {
        border: 2px solid var(--success-color);
      }

      .user-avatar.verified::after {
        content: '✓';
        position: absolute;
        bottom: -2px;
        right: -2px;
        background: var(--success-color);
        color: white;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        font-size: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Premium Badge */
      .premium-badge {
        display: inline-flex;
        align-items: center;
        background: linear-gradient(45deg, #FFD700, #FFA500);
        color: #333;
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
        margin-right: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      }

      .verified-badge {
        display: inline-flex;
        align-items: center;
        background: var(--success-color);
        color: white;
        padding: 3px 8px;
        border-radius: 12px;
        font-size: 0.7rem;
        font-weight: bold;
        margin-right: 8px;
      }

      /* Message Counter */
      .message-counter {
        background: var(--primary-color);
        color: white;
        padding: 8px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
        margin-right: 10px;
      }

      .message-counter.low {
        background: var(--warning-color);
      }

      .message-counter.critical {
        background: var(--danger-color);
      }

      /* Verification Notice */
      .verification-notice {
        background: var(--warning-color);
        color: white;
        padding: 10px 15px;
        border-radius: 8px;
        margin: 10px 0;
        text-align: center;
        font-size: 0.9rem;
      }

      .verification-notice a {
        color: white;
        text-decoration: underline;
        cursor: pointer;
      }

      /* Success Alert */
      .alert-success {
        background: var(--success-color);
        color: white;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        text-align: center;
      }

      /* Media Queries */
      @media (max-width: 960px) {
        .text-xxl {
          font-size: 2.5rem;
        }
        
        .hero-heading {
          font-size: 2.8rem;
        }
      }

      @media (max-width: 720px) and (max-height: 1600px) {
        body {
          font-size: 18px;
        }
        
        .hero {
          height: 70vh;
          margin-top: 70px;
        }
        
        .hero-heading {
          font-size: 2.5rem;
        }
        
        .hero-text {
          font-size: 1.1rem;
        }
        
        .container, .container-sm {
          padding: 0 20px;
        }
        
        .text-xxl {
          font-size: 2.2rem;
        }
        
        .text-xl {
          font-size: 1.9rem;
        }
        
        .btn {
          padding: 15px 25px;
          font-size: 1.1rem;
        }
      }

      @media (max-width: 670px) {
        .navbar .main-menu {
          display: none;
        }

        .navbar .hamburger-button {
          display: block;
        }

        .hero .hero-content,
        .hero .hero-text {
          width: 100%;
          text-align: center;
        }

        .hero .hero-buttons .btn {
          margin-bottom: 10px;
          display: block;
          width: 100%;
        }

        .testimonials .testimonials-heading {
          max-width: 100%;
          text-align: center;
        }

        .testimonials .testimonials-grid,
        .pricing .pricing-grid,
        .footer .footer-grid {
          grid-template-columns: 1fr;
        }

        .footer .card {
          margin-left: 0;
        }

        .footer .footer-grid > div {
          text-align: center;
        }

        /* Text */
        .text-xl {
          font-size: 1.9rem;
        }

        .text-lg {
          font-size: 1.5rem;
        }

        .text-md {
          font-size: 1.1rem;
        }
        
        .hero-heading {
          font-size: 2.2rem;
        }
      }

      @media (max-width: 500px) {
        .text-xxl {
          font-size: 2rem;
        }
        
        .hero-heading {
          font-size: 1.8rem;
        }
      }

      /* Animations */
      @keyframes glow {
        0% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.7); }
        50% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.9); }
        100% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.7); }
      }

      .gold-glow {
        animation: glow 2s infinite;
      }
    </style>
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <!-- Modal for Login/Signup -->
    <div class="modal" id="authModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">تسجيل الدخول</h2>
          <button class="close-modal">&times;</button>
        </div>
        <form id="loginForm">
          <div class="form-group">
            <label for="loginEmail">البريد الإلكتروني</label>
            <input type="email" id="loginEmail" required />
          </div>
          <div class="form-group">
            <label for="loginPassword">كلمة المرور</label>
            <div class="password-input">
              <input type="password" id="loginPassword" required />
              <button type="button" class="toggle-password">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-block">تسجيل الدخول</button>
          <div class="form-footer">
            <p>ليس لديك حساب؟ <a id="switchToSignup">إنشاء حساب</a></p>
          </div>
        </form>

        <form id="signupForm" style="display: none">
          <div class="form-group">
            <label for="signupUsername">اسم المستخدم</label>
            <input type="text" id="signupUsername" required />
          </div>
          <div class="form-group">
            <label for="signupEmail">البريد الإلكتروني</label>
            <input type="email" id="signupEmail" required />
          </div>
          <div class="form-group">
            <label for="signupPassword">كلمة المرور</label>
            <div class="password-input">
              <input type="password" id="signupPassword" required />
              <button type="button" class="toggle-password">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          <div class="form-group">
            <label for="confirmPassword">تأكيد كلمة المرور</label>
            <div class="password-input">
              <input type="password" id="confirmPassword" required />
              <button type="button" class="toggle-password">
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>
          <button type="submit" class="btn btn-primary btn-block">إنشاء حساب</button>
          <div class="form-footer">
            <p>لديك حساب بالفعل؟ <a id="switchToLogin">تسجيل الدخول</a></p>
          </div>
        </form>
      </div>
    </div>

    <nav class="navbar">
      <div class="container">
        <div class="logo">
          <a href="index.html">
             <h1>GEAR AI</h1>
          </a>
        </div>

        <div class="main-menu">
          <ul>
            <li>
              <a href="gear.html">التحدث مع GEAR</a>
            </li>
            <li>
              <a href="#pricing">الاشتراكات</a>
            </li>
            <li>
              <a class="btn" href="#" id="loginBtn"> 
                <i class="fas fa-user"></i> تسجيل الدخول 
              </a>
            </li>
            <li class="user-info" id="userInfo">
              <div class="message-counter" id="messageCounter">0 رسالة</div>
              <div class="user-avatar" id="userAvatar"></div>
              <span id="userName"></span>
              <div id="userMessages" style="margin-right: 10px; background: var(--primary-color); color: white; padding: 5px 10px; border-radius: 15px; font-size: 0.8rem;"></div>
              <a class="btn" href="#" id="logoutBtn" style="margin-right: 10px;"> 
                <i class="fas fa-sign-out-alt"></i> تسجيل الخروج 
              </a>
            </li>
          </ul>
        </div>
        <!-- Hamburger Button -->
        <button class="hamburger-button">
          <div class="hamburger-line"></div>
          <div class="hamburger-line"></div>
          <div class="hamburger-line"></div>
        </button>
        <div class="mobile-menu">
          <ul>
            <li>
              <a href="gear.html">التحدث مع GEAR</a>
            </li>
            <li>
              <a href="#pricing">الاشتراكات</a>
            </li>
            <li>
              <a class="btn" href="#" id="mobileLoginBtn"> 
                <i class="fas fa-user"></i> تسجيل الدخول 
              </a>
            </li>
            <li class="user-info" id="mobileUserInfo" style="display: none">
              <div class="message-counter" id="mobileMessageCounter">0 رسالة</div>
              <div class="user-avatar" id="mobileUserAvatar"></div>
              <span id="mobileUserName"></span>
              <div id="mobileUserMessages" style="margin-right: 10px; background: var(--primary-color); color: white; padding: 5px 10px; border-radius: 15px; font-size: 0.8rem;"></div>
              <a class="btn" href="#" id="mobileLogoutBtn" style="margin-top: 10px;"> 
                <i class="fas fa-sign-out-alt"></i> تسجيل الخروج 
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Hero Section with Video Background -->
    <section class="hero">
      <video autoplay muted loop class="hero-video">
        <source src="HERO.mp4" type="video/mp4">
        متصفحك لا يدعم تشغيل الفيديو.
      </video>
      <div class="hero-content">
        <h1 class="hero-heading animate__animated animate__fadeInDown">
          GEAR AI - مستقبل الذكاء الاصطناعي بين يديك
        </h1>
        <p class="hero-text animate__animated animate__fadeInUp">
          اكتشف قوة الذكاء الاصطناعي المتطور الذي يغير طريقة عملك وحياتك. حلول ذكية، إبداعية، وفعالة.
        </p>
        <div class="hero-buttons animate__animated animate__fadeInUp">
          <a href="gear.html" class="btn btn-primary">ابدأ المحادثة الآن</a>
        </div>
      </div>
    </section>

    <!-- Video/Promo Code Section -->
    <section class="video-section" id="about">
      <video autoplay muted loop class="video-section-bg">
        <source src="2section.mp4" type="video/mp4">
        متصفحك لا يدعم تشغيل الفيديو.
      </video>
      <div class="container">
        <div class="video-section-content">
          <h2 class="video-section-heading text-xl">
            هل لديك كود اشتراك؟ ادخله الآن واستمتع باشتراكك المميز في GEAR AI
          </h2>
          <div class="promo-code-container">
            <div id="promoCodeAlert"></div>
            <form class="promo-code-form" id="promoCodeForm">
              <input type="text" class="promo-code-input" id="promoCode" placeholder="أدخل كود الاشتراك هنا" required>
              <button type="submit" class="btn btn-primary btn-block">تفعيل الكود</button>
            </form>
            <p class="text-center" style="margin-top: 20px;">
              ليس لديك كود اشتراك؟ 
              <button class="get-code-btn" id="getCodeBtn">اشترك الآن واحصل عليه</button>
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials bg-light">
      <video autoplay muted loop class="testimonials-bg">
        <source src="2section.mp4" type="video/mp4">
        متصفحك لا يدعم تشغيل الفيديو.
      </video>
      <div class="container">
        <h3 class="testimonials-heading text-xl text-center">
         ماهو GEAR AI 
        </h3>
        <div class="testimonials-grid">
          <div class="card">
            <p>
              هو شات مع ذكاء اصطناعى يعمل من خلال اكثر من موديل مثل ( CHATGPT , DEEPSEEK , GEMINI )
            </p>
            <p> موديلات الذكاء الاصطناعى</p>
          </div>

          <div class="card">
            <p>
              اهم الاستخدامات لهذا الذكاء الاصطناعى هى تسهيل الحياة اليومية والاجابة عن اسئلة عندك بدون اى اخطاء او تاخير 
            </p>
          </div>

          <div class="card">
            <p>
              يمكن استخدامه فى كتابت الاكواد البرمجية مثل تصميم مواقع ويب او تطبيقات هاتف وتسهيل الطريق للتعلم
            </p>
            <p>مطور برمجيات</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Pricing -->
    <section class="pricing" id="pricing">
      <video autoplay muted loop class="pricing-bg">
        <source src="2section.mp4" type="video/mp4">
        متصفحك لا يدعم تشغيل الفيديو.
      </video>
      <div class="container-sm">
        <h3 class="pricing-heading text-xl text-center">اختر خطة GEAR AI المناسبة لك</h3>
        <p class="pricing-subheading text-md text-center">
          ابدأ مجانًا وقم بالترقية عندما تكون مستعدًا. حلول ذكية تنمو معك.
        </p>
        <div class="pricing-grid">
          <!-- Pricing Card 1 -->
          <div class="card pricing-card">
            <div class="pricing-card-header">
              <h4 class="pricing-heading text-xl">الطلاب</h4>
              <p class="pricing-card-subheading">
                مثالي للطلاب والمتعلمين. استمتع بميزات الذكاء الاصطناعي الأساسية.
              </p>
              <div class="pricing-card-price">
                <span class="text-xl">20 جنيه </span>
                <span class="pricing-card-period">/شهريًا</span>
              </div>
            </div>
            <div class="pricing-card-body">
              <ul class="pricing-features">
                <li><i class="fas fa-check"></i> وصول كامل إلى GEAR AI الأساسي</li>
                <li><i class="fas fa-check"></i> إنشاء محتوى ذكي</li>
                <li><i class="fas fa-check"></i> 50 رسالة كل يوم </li>
              </ul>
              <a href="#" class="btn btn-primary btn-block subscribe-btn" data-plan="الطلاب" data-price="20">اشتراك</a>
            </div>
          </div>

          <!-- Pricing Card 2 -->
          <div class="card pricing-card pricing-card-premium">
            <div class="pricing-card-popular">
              <i class="fas fa-crown"></i> الافضل 
            </div>
            <div class="pricing-card-header">
              <h4 class="pricing-card-heading text-xl">المحترف</h4>
              <p class="pricing-card-subheading">
                الحل الشامل للمحترفين والشركات. استمتع بكل إمكانيات GEAR AI.
              </p>
              <div class="pricing-card-price">
                <span class="text-xl">250 جنيه</span>
                <span class="pricing-card-period">/6 شهور</span>
              </div>
            </div>
            <div class="pricing-card-body">
              <ul class="pricing-features">
                <li><i class="fas fa-check"></i> بحث عميق</li>
                <li><i class="fas fa-check"></i> GEAR AI المتقدم مع إمكانيات غير محدودة</li>
                <li><i class="fas fa-check"></i> رسائل غير محدودة </li>
              </ul>
              <a href="#" class="btn btn-gold btn-block subscribe-btn" data-plan="بريميوم" data-price="150">اشتراك</a>
            </div>
          </div>
        </div>
        <p class="pricing-footer text-center">
          جميع الأسعار بالجنيه المصري. يمكنك التراجع عن الاشتراك في أي وقت.
        </p>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer bg-black">
      <div class="container">
        <div class="footer-grid">
          <div>
            <div class="social-icons">
              <a href="#"><i class="fab fa-facebook"></i></a> 
              <a href="tel:+201148179176"><i class="fab fa-whatsapp"></i></a> 
              <a href="#"><i class="fab fa-instagram"></i></a>
            </div>
          </div>
          <div>
            <h4>GEAR AI</h4>
          </div>
          <div>
            <!-- Empty div for layout -->
          </div>
          <div>
            <h4>اتصل بنا</h4>
            <ul>
              <li>
                <a href="mailto:support@gear-ai.com">mostafefareg3@G.com</a>
              </li>
              <li>
                <a href="tel:+201148179176">+20 114 817 9176</a>
              </li>
            </ul>
          </div>
        </div>
        <div class="text-center" style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #444;">
          <p>&copy;جميع حقوق الطبع والنشر تذهب الى M0S7A5E - GEAR AI WEBSITE.</p>
        </div>
      </div>
    </footer>

    <script>
      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCffrRr-wYBeiAf7GML6Xs3kQg-14mLFhQ",
        authDomain: "prompat-76c51.firebaseapp.com",
        projectId: "prompat-76c51",
        storageBucket: "prompat-76c51.firebasestorage.app",
        messagingSenderId: "663109200073",
        appId: "1:663109200073:web:9da9a15649a88028b68518",
        measurementId: "G-HKL1XTBX6H"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const db = firebase.firestore();

      // DOM Elements
      const authModal = document.getElementById('authModal');
      const loginForm = document.getElementById('loginForm');
      const signupForm = document.getElementById('signupForm');
      const loginBtn = document.getElementById('loginBtn');
      const mobileLoginBtn = document.getElementById('mobileLoginBtn');
      const logoutBtn = document.getElementById('logoutBtn');
      const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');
      const closeModal = document.querySelector('.close-modal');
      const switchToSignup = document.getElementById('switchToSignup');
      const switchToLogin = document.getElementById('switchToLogin');
      const modalTitle = document.getElementById('modalTitle');
      const userInfo = document.getElementById('userInfo');
      const userName = document.getElementById('userName');
      const userAvatar = document.getElementById('userAvatar');
      const messageCounter = document.getElementById('messageCounter');
      const mobileUserInfo = document.getElementById('mobileUserInfo');
      const mobileUserName = document.getElementById('mobileUserName');
      const mobileUserAvatar = document.getElementById('mobileUserAvatar');
      const mobileMessageCounter = document.getElementById('mobileMessageCounter');
      const subscribeButtons = document.querySelectorAll('.subscribe-btn');
      const togglePasswordButtons = document.querySelectorAll('.toggle-password');
      const promoCodeForm = document.getElementById('promoCodeForm');
      const promoCodeInput = document.getElementById('promoCode');
      const getCodeBtn = document.getElementById('getCodeBtn');
      const promoCodeAlert = document.getElementById('promoCodeAlert');

      // Special promo codes with their benefits
      const specialPromoCodes = {
        "GEAR78STUD": {
          messages: 500,
          premium: false,
          description: "كود الطلاب - 500 رسالة"
        },
        "YOUSEFGEAR55": {
          messages: 5000,
          premium: true,
          description: "كود مميز - 5000 رسالة + اشتراك بريميوم"
        },
        "IAMPRO8GE": {
          messages: 8000,
          premium: true,
          description: "كود محترف - 8000 رسالة + اشتراك بريميوم"
        }
      };

      // Array of random user avatar images
      const userAvatarImages = [
        'images/avatars/avatar1.jpg',
        'images/avatars/avatar2.jpg',
        'images/avatars/avatar3.jpg',
        'images/avatars/avatar4.jpg',
        'images/avatars/avatar5.jpg',
        'images/avatars/avatar6.jpg'
      ];

      // Function to get a random avatar image
      function getRandomAvatar() {
        const randomIndex = Math.floor(Math.random() * userAvatarImages.length);
        return userAvatarImages[randomIndex];
      }

      // Show alert message
      function showAlert(message, type = 'success') {
        promoCodeAlert.innerHTML = `
          <div class="alert-${type}" style="background: ${type === 'success' ? 'var(--success-color)' : 'var(--danger-color)'}; color: white; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
            ${message}
          </div>
        `;
        setTimeout(() => {
          promoCodeAlert.innerHTML = '';
        }, 5000);
      }

      // Send email verification
      function sendEmailVerification() {
        const user = auth.currentUser;
        if (user) {
          user.sendEmailVerification()
          .then(() => {
            showAlert('تم إرسال رابط التحقق إلى بريدك الإلكتروني. يرجى التحقق من بريدك.', 'success');
          })
          .catch((error) => {
            console.error('Error sending verification email:', error);
            showAlert('حدث خطأ في إرسال بريد التحقق', 'error');
          });
        }
      }

      // Check email verification status
      function checkEmailVerification() {
        const user = auth.currentUser;
        if (user) {
          user.reload().then(() => {
            if (user.emailVerified) {
              // Update avatar with verified badge
              userAvatar.classList.add('verified');
              mobileUserAvatar.classList.add('verified');
              
              // Update user data in Firestore
              db.collection('users').doc(user.uid).update({
                emailVerified: true,
                emailVerifiedAt: firebase.firestore.FieldValue.serverTimestamp()
              });
            }
          });
        }
      }

      // Update message counter display
      function updateMessageCounter(usedMessages = 0, availableMessages = 50) {
        const remaining = availableMessages - usedMessages;
        const counterElement = messageCounter;
        const mobileCounterElement = mobileMessageCounter;
        
        // Update counter text
        counterElement.textContent = `${remaining} رسالة متبقية`;
        mobileCounterElement.textContent = `${remaining} رسالة متبقية`;
        
        // Update counter color based on remaining messages
        counterElement.className = 'message-counter';
        mobileCounterElement.className = 'message-counter';
        
        if (remaining <= 10) {
          counterElement.classList.add('critical');
          mobileCounterElement.classList.add('critical');
        } else if (remaining <= 25) {
          counterElement.classList.add('low');
          mobileCounterElement.classList.add('low');
        }
      }

      // Toggle password visibility
      togglePasswordButtons.forEach(button => {
        button.addEventListener('click', function() {
          const input = this.parentElement.querySelector('input');
          const icon = this.querySelector('i');
          
          if (input.type === 'password') {
            input.type = 'text';
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
          } else {
            input.type = 'password';
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
          }
        });
      });

      // Switch between login and signup forms
      switchToSignup.addEventListener('click', function() {
        loginForm.style.display = 'none';
        signupForm.style.display = 'block';
        modalTitle.textContent = 'إنشاء حساب';
      });

      switchToLogin.addEventListener('click', function() {
        signupForm.style.display = 'none';
        loginForm.style.display = 'block';
        modalTitle.textContent = 'تسجيل الدخول';
      });

      // Open modal
      function openAuthModal() {
        authModal.classList.add('active');
      }

      // Close modal
      function closeAuthModal() {
        authModal.classList.remove('active');
        // Reset forms
        loginForm.reset();
        signupForm.reset();
        loginForm.style.display = 'block';
        signupForm.style.display = 'none';
        modalTitle.textContent = 'تسجيل الدخول';
      }

      // Event listeners for modal
      loginBtn.addEventListener('click', openAuthModal);
      mobileLoginBtn.addEventListener('click', openAuthModal);
      closeModal.addEventListener('click', closeAuthModal);

      // Close modal when clicking outside
      window.addEventListener('click', function(event) {
        if (event.target === authModal) {
          closeAuthModal();
        }
      });

      // Sign up function
      signupForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const username = document.getElementById('signupUsername').value;
        const email = document.getElementById('signupEmail').value;
        const password = document.getElementById('signupPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
        
        if (password !== confirmPassword) {
          alert('كلمات المرور غير متطابقة');
          return;
        }
        
        if (password.length < 6) {
          alert('كلمة المرور يجب أن تكون 6 أحرف على الأقل');
          return;
        }
        
        auth.createUserWithEmailAndPassword(email, password)
          .then((userCredential) => {
            // Signed up successfully
            const user = userCredential.user;
            
            // Update user profile with username
            return user.updateProfile({
              displayName: username
            });
          })
          .then(() => {
            // Create user document in Firestore
            const user = auth.currentUser;
            const randomAvatar = getRandomAvatar();
            
            return db.collection('users').doc(user.uid).set({
              username: username,
              email: email,
              emailVerified: false,
              premium: false,
              messages: 0,
              availableMessages: 50,
              avatar: randomAvatar,
              createdAt: firebase.firestore.FieldValue.serverTimestamp()
            });
          })
          .then(() => {
            // Send verification email
            sendEmailVerification();
            // Close modal and update UI
            closeAuthModal();
            updateUserUI();
            showAlert('تم إنشاء الحساب بنجاح! تم إرسال رابط التحقق إلى بريدك الإلكتروني.');
          })
          .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            alert(`خطأ في إنشاء الحساب: ${errorMessage}`);
          });
      });

      // Login function
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        
        auth.signInWithEmailAndPassword(email, password)
          .then((userCredential) => {
            // Signed in successfully
            closeAuthModal();
            updateUserUI();
            // Check email verification status
            checkEmailVerification();
          })
          .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            alert(`خطأ في تسجيل الدخول: ${errorMessage}`);
          });
      });

      // Logout function
      logoutBtn.addEventListener('click', function(e) {
        e.preventDefault();
        if (confirm('هل أنت متأكد من تسجيل الخروج؟')) {
          auth.signOut().then(() => {
            updateUserUI();
          });
        }
      });

      mobileLogoutBtn.addEventListener('click', function(e) {
        e.preventDefault();
        if (confirm('هل أنت متأكد من تسجيل الخروج؟')) {
          auth.signOut().then(() => {
            updateUserUI();
          });
        }
      });

      // Update UI based on authentication state
      function updateUserUI() {
        const user = auth.currentUser;
        
        if (user) {
          // User is signed in
          const displayName = user.displayName || user.email.split('@')[0];
          
          // Get user data from Firestore
          db.collection('users').doc(user.uid).get()
            .then((doc) => {
              if (doc.exists) {
                const userData = doc.data();
                
                // Update desktop UI
                userName.textContent = displayName;
                mobileUserName.textContent = displayName;
                
                // Set user avatar (use stored avatar or get a random one)
                if (userData.avatar) {
                  userAvatar.style.backgroundImage = `url(${userData.avatar})`;
                  userAvatar.textContent = '';
                  mobileUserAvatar.style.backgroundImage = `url(${userData.avatar})`;
                  mobileUserAvatar.textContent = '';
                } else {
                  const randomAvatar = getRandomAvatar();
                  userAvatar.style.backgroundImage = `url(${randomAvatar})`;
                  userAvatar.textContent = '';
                  mobileUserAvatar.style.backgroundImage = `url(${randomAvatar})`;
                  mobileUserAvatar.textContent = '';
                  
                  // Update user document with the random avatar
                  db.collection('users').doc(user.uid).update({
                    avatar: randomAvatar
                  });
                }
                
                // Check if user has premium status
                if (userData.premium) {
                  userAvatar.classList.add('premium', 'gold-glow');
                  mobileUserAvatar.classList.add('premium', 'gold-glow');
                } else {
                  userAvatar.classList.remove('premium', 'gold-glow');
                  mobileUserAvatar.classList.remove('premium', 'gold-glow');
                }
                
                // Check email verification
                if (userData.emailVerified || user.emailVerified) {
                  userAvatar.classList.add('verified');
                  mobileUserAvatar.classList.add('verified');
                }
                
                // Update messages count
                const usedMessages = userData.messages || 0;
                const availableMessages = userData.availableMessages || 50;
                updateMessageCounter(usedMessages, availableMessages);
                
                userInfo.classList.add('active');
                loginBtn.style.display = 'none';
                
                // Update mobile UI
                mobileUserInfo.style.display = 'block';
                mobileLoginBtn.style.display = 'none';
              }
            })
            .catch((error) => {
              console.error("Error getting user document:", error);
            });
        } else {
          // User is signed out
          userInfo.classList.remove('active');
          loginBtn.style.display = 'block';
          
          mobileUserInfo.style.display = 'none';
          mobileLoginBtn.style.display = 'block';
        }
      }

      // Subscribe button functionality
      subscribeButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          
          const user = auth.currentUser;
          if (!user) {
            // User not logged in, open auth modal
            openAuthModal();
            return;
          }
          
          // User is logged in, proceed with subscription
          const plan = this.getAttribute('data-plan');
          const price = this.getAttribute('data-price');
          const username = user.displayName || user.email.split('@')[0];
          
          // Create WhatsApp message
          const message = `مرحباً، أريد الاشتراك في باقة ${plan} من GEAR AI بسعر ${price} جنيه.\nاسم المستخدم: ${username}`;
          const encodedMessage = encodeURIComponent(message);
          const whatsappURL = `https://wa.me/201148179176?text=${encodedMessage}`;
          
          // Redirect to WhatsApp
          window.open(whatsappURL, '_blank');
        });
      });

      // Promo code functionality - الإصلاح النهائي
      promoCodeForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const user = auth.currentUser;
        if (!user) {
          showAlert('يجب تسجيل الدخول أولاً لتفعيل كود الاشتراك', 'error');
          openAuthModal();
          return;
        }
        
        const promoCode = promoCodeInput.value.trim().toUpperCase();
        
        if (!promoCode) {
          showAlert('يرجى إدخال كود الاشتراك', 'error');
          return;
        }
        
        // Check if the promo code exists in our special codes
        if (specialPromoCodes[promoCode]) {
          const promoDetails = specialPromoCodes[promoCode];
          
          // Check if this code has already been used by this user
          db.collection('usedPromoCodes').doc(`${user.uid}_${promoCode}`).get()
            .then((doc) => {
              if (doc.exists) {
                showAlert('لقد استخدمت هذا الكود من قبل. كل كود يمكن استخدامه مرة واحدة فقط.', 'error');
                return;
              }
              
              // Code hasn't been used by this user, proceed with activation
              const userRef = db.collection('users').doc(user.uid);
              
              // Get current user data
              userRef.get().then((doc) => {
                if (doc.exists) {
                  const userData = doc.data();
                  
                  // الإصلاح النهائي: إضافة الرسائل الجديدة إلى الرسائل المتاحة
                  const currentAvailableMessages = userData.availableMessages || 50;
                  const newAvailableMessages = currentAvailableMessages + promoDetails.messages;
                  
                  // Update user data with new available messages and premium status if applicable
                  const updateData = {
                    availableMessages: newAvailableMessages,
                    promoCodeUsed: promoCode,
                    promoCodeUsedAt: firebase.firestore.FieldValue.serverTimestamp()
                  };
                  
                  // If the promo code grants premium status, update that too
                  if (promoDetails.premium) {
                    updateData.premium = true;
                    updateData.premiumSince = firebase.firestore.FieldValue.serverTimestamp();
                  }
                  
                  // Update user document
                  userRef.update(updateData)
                    .then(() => {
                      // Mark this code as used by this user
                      return db.collection('usedPromoCodes').doc(`${user.uid}_${promoCode}`).set({
                        userId: user.uid,
                        promoCode: promoCode,
                        usedAt: firebase.firestore.FieldValue.serverTimestamp()
                      });
                    })
                    .then(() => {
                      showAlert(`🎉 تم تفعيل كود الاشتراك بنجاح! ${promoDetails.description} - لديك الآن ${newAvailableMessages} رسالة متاحة`, 'success');
                      promoCodeInput.value = '';
                      updateUserUI();
                    })
                    .catch((error) => {
                      console.error("Error updating user document:", error);
                      showAlert('حدث خطأ أثناء تفعيل الكود. يرجى المحاولة مرة أخرى.', 'error');
                    });
                }
              });
            })
            .catch((error) => {
              console.error("Error checking used promo codes:", error);
              showAlert('حدث خطأ أثناء التحقق من الكود. يرجى المحاولة مرة أخرى.', 'error');
            });
        } else {
          showAlert('كود الاشتراك غير صحيح. يرجى التحقق والمحاولة مرة أخرى.', 'error');
        }
      });

      // Get code button - redirect to pricing section
      getCodeBtn.addEventListener('click', function() {
        document.getElementById('pricing').scrollIntoView({
          behavior: 'smooth'
        });
      });

      // Initialize special promo codes in database (run once)
      function initializePromoCodes() {
        const promoCodeRef = db.collection('promoCodes');
        
        Object.keys(specialPromoCodes).forEach(code => {
          promoCodeRef.doc(code).get().then((doc) => {
            if (!doc.exists) {
              // Code doesn't exist in database, add it
              promoCodeRef.doc(code).set({
                code: code,
                messages: specialPromoCodes[code].messages,
                premium: specialPromoCodes[code].premium,
                description: specialPromoCodes[code].description,
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
              });
            }
          });
        });
      }

      // Check auth state on page load
      auth.onAuthStateChanged((user) => {
        updateUserUI();
        if (user) {
          checkEmailVerification();
        }
        // Initialize promo codes in database
        initializePromoCodes();
      });

      // FAQ Accordion
      document.addEventListener('DOMContentLoaded', () => {
        const faqContainer = document.querySelector('.faq-content');

        if (faqContainer) {
          faqContainer.addEventListener('click', (e) => {
            const groupHeader = e.target.closest('.faq-group-header');

            if (!groupHeader) return;

            const group = groupHeader.parentElement;
            const groupBody = group.querySelector('.faq-group-body');
            const icon = groupHeader.querySelector('i');

            // Toggle icon
            icon.classList.toggle('fa-plus');
            icon.classList.toggle('fa-minus');

            // Toggle visibility of body
            groupBody.classList.toggle('open');

            // Close other open FAQ bodies
            const otherGroups = faqContainer.querySelectorAll('.faq-group');

            otherGroups.forEach((otherGroup) => {
              if (otherGroup !== group) {
                const otherGroupBody = otherGroup.querySelector('.faq-group-body');
                const otherIcon = otherGroup.querySelector('.faq-group-header i');

                otherGroupBody.classList.remove('open');
                otherIcon.classList.remove('fa-minus');
                otherIcon.classList.add('fa-plus');
              }
            });
          });
        }
      });

      // Mobile Menu
      document.addEventListener('DOMContentLoaded', () => {
        const hamburgerButton = document.querySelector('.hamburger-button');
        const mobileMenu = document.querySelector('.mobile-menu');

        hamburgerButton.addEventListener('click', () =>
          mobileMenu.classList.toggle('active')
        );
      });

      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          
          const targetId = this.getAttribute('href');
          if (targetId === '#') return;
          
          const targetElement = document.querySelector(targetId);
          if (targetElement) {
            targetElement.scrollIntoView({
              behavior: 'smooth'
            });
            
            // Close mobile menu if open
            const mobileMenu = document.querySelector('.mobile-menu');
            if (mobileMenu.classList.contains('active')) {
              mobileMenu.classList.remove('active');
            }
          }
        });
      });
    </script>
  </body>
</html>
